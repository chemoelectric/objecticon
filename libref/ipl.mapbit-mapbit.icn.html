<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>mapbit.icn</title></head><body><pre>
<a name="1"/>############################################################################
<a name="2"/>#
<a name="3"/>#	File:     mapbit.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedures to map string into bit representation
<a name="6"/>#
<a name="7"/>#	Author:   Ralph E. Griswold
<a name="8"/>#
<a name="9"/>#	Date:     December 5, 1995
<a name="10"/>#
<a name="11"/>############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>############################################################################
<a name="16"/>#
<a name="17"/>#     The procedure mapbit(s) produces a string of zeros and ones
<a name="18"/>#  corresponding to the bit patterns for the characters of s.  For
<a name="19"/>#  example, mapbit("Axe") produces "010000010111100001100101".
<a name="20"/>#
<a name="21"/>############################################################################
<a name="22"/>#
<a name="23"/>#  Links: strings
<a name="24"/>#
<a name="25"/>############################################################################
<a name="26"/>
<a name="27"/>package ipl.mapbit
<a name="28"/>
<a name="29"/>import
<a name="30"/>   ipl.strings(collate)
<a name="31"/>
<a name="32"/>procedure bilit(text,alpha,first,second)
<a name="33"/>   return collate(map(text,alpha,first),map(text,alpha,second))
<a name="34"/>end
<a name="35"/>
<a name="36"/>procedure mapbit(s)
<a name="37"/>   static all, base16, hex1, hex2, quad1, quad2, pair1, pair2
<a name="38"/>
<a name="39"/>   #  The following is a bit ornate, but then ... .  It could be
<a name="40"/>   #  made more compact (and cryptic) by using lists of templates
<a name="41"/>   #  and parameterizing the initialization.
<a name="42"/>
<a name="43"/>   initial {
<a name="44"/>      all := string(&amp;cset)
<a name="45"/>      base16 := "0123456789ABCDEF"
<a name="46"/>      hex1 := ""
<a name="47"/>      every hex1 ||:= repl(!base16,16)
<a name="48"/>      hex2 := repl(base16,16)
<a name="49"/>      quad1 := ""
<a name="50"/>      every quad1 ||:= repl(!left(base16,4),4)
<a name="51"/>      quad2 := repl(left(base16,4),4)
<a name="52"/>      pair1 := ""
<a name="53"/>      every pair1 ||:= repl(!left(base16,2),2)
<a name="54"/>      pair2 := repl(left(base16,2),2)
<a name="55"/>      }
<a name="56"/>
<a name="57"/>   s := bilit(bilit(bilit(s,all,hex1,hex2),base16,quad1,quad2),left(base16,4),
<a name="58"/>           pair1,pair2)
<a name="59"/>   return s
<a name="60"/>end
</pre></body></html>
