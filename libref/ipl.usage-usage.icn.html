<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>usage.icn</title></head><body><pre>
<a name="1"/>############################################################################
<a name="2"/>#
<a name="3"/>#	File:     usage.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedures for service functions
<a name="6"/>#
<a name="7"/>#	Author:   Ralph E. Griswold
<a name="8"/>#
<a name="9"/>#	Date:     July 19, 1991
<a name="10"/>#
<a name="11"/>############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>############################################################################
<a name="16"/>#
<a name="17"/>#     These procedures provide various common services:
<a name="18"/>#
<a name="19"/>#     Usage(s)          stops executions with a message concerning the
<a name="20"/>#                       expected form of usage of a program.
<a name="21"/>#
<a name="22"/>#     Error(L[])	writes arguments to stderr and returns.
<a name="23"/>#
<a name="24"/>#
<a name="25"/>#     ErrorCheck(l,f)	reports an error that has been converted to
<a name="26"/>#                       failure.
<a name="27"/>#
<a name="28"/>#     Feature(s)        succeeds if feature s is available in the running
<a name="29"/>#                       implementation of Icon.
<a name="30"/>#
<a name="31"/>#     Requires(s)	terminates execution is feature s is not available.
<a name="32"/>#
<a name="33"/>#     Signature()	writes the version, host, and features support in
<a name="34"/>#                       the running implementation of Icon.
<a name="35"/>#
<a name="36"/>############################################################################
<a name="37"/>
<a name="38"/>package ipl.usage
<a name="39"/>
<a name="40"/>import
<a name="41"/>   io(ewrite, stop, write)
<a name="42"/>
<a name="43"/>procedure Usage(s)
<a name="44"/>   stop("Usage: ",s)
<a name="45"/>end
<a name="46"/>
<a name="47"/>procedure Error(L[])
<a name="48"/>   push(L,"*** ")
<a name="49"/>   ewrite ! L
<a name="50"/>end
<a name="51"/>
<a name="52"/>procedure ErrorCheck(line,file)
<a name="53"/>   &amp;errortext | fail	# No converted error
<a name="54"/>   write("\nError ",&amp;errornumber," at line ",line, " in file ",file)
<a name="55"/>   write(&amp;errortext)
<a name="56"/>   write("Offending value: ",image(&amp;errorvalue))
<a name="57"/>   return
<a name="58"/>end
<a name="59"/>
<a name="60"/>procedure Feature(s)
<a name="61"/>   if s == &amp;features then return else fail
<a name="62"/>end
<a name="63"/>
<a name="64"/>procedure Requires(s)
<a name="65"/>   Feature(s) | stop(s," required")
<a name="66"/>end
<a name="67"/>
<a name="68"/>procedure Signature()
<a name="69"/>   write(&amp;version)
<a name="70"/>   write(&amp;host)
<a name="71"/>   every write(&amp;features)
<a name="72"/>end
</pre></body></html>
