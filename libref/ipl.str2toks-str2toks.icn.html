<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>str2toks.icn</title></head><body><pre>
<a name="1"/>############################################################################
<a name="2"/>#
<a name="3"/>#	File:     str2toks.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedures to convert string to tokens
<a name="6"/>#
<a name="7"/>#	Author:   Richard L. Goerwitz
<a name="8"/>#
<a name="9"/>#	Date:	  March 3, 1996
<a name="10"/>#
<a name="11"/>############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>############################################################################
<a name="16"/>#
<a name="17"/>#	Version:  1.2
<a name="18"/>#
<a name="19"/>############################################################################
<a name="20"/>#
<a name="21"/>#  str2toks:  cset x string x integer x integer -&gt; strings
<a name="22"/>#             (c, s, i, j)                      -&gt; s1, s2, ...
<a name="23"/>#
<a name="24"/>#      Suspends portions of s[i:j] delimited by characters in c.  The
<a name="25"/>#      usual defaults for s, i, and j apply, although str2toks is not
<a name="26"/>#      meant as a primitive scanning function (note that it suspends
<a name="27"/>#      strings, and not integer positions).
<a name="28"/>#
<a name="29"/>#      Defaults:
<a name="30"/>#
<a name="31"/>#          c     ~(&amp;letters ++ &amp;digits)
<a name="32"/>#          s     &amp;subject
<a name="33"/>#          i     &amp;pos if s is defaulted, otherwise 1
<a name="34"/>#          j     0
<a name="35"/>#
<a name="36"/>#  Basically, this file is just a very simple piece of code wrapped up
<a name="37"/>#  with some sensible defaults, and isolated in its own procedure.
<a name="38"/>#
<a name="39"/>############################################################################
<a name="40"/>#
<a name="41"/>#  Example:
<a name="42"/>#
<a name="43"/>#      "hello, how are ya?" ? every write(str2toks())
<a name="44"/>#
<a name="45"/>#  The above expression would write to &amp;output, on successive lines,
<a name="46"/>#  the words "hello", "how", "are", and finally "ya" (skipping the
<a name="47"/>#  punctuation).  Naturally, the beginning and end of the line count
<a name="48"/>#  as delimiters.
<a name="49"/>#
<a name="50"/>#  Note that if i &gt; 1 or j &lt; *s+1 some tokens may end up appearing
<a name="51"/>#  truncated.  Normally, one should simply use the defaults for i and
<a name="52"/>#  j - and for s as well when inside a scanning expression.
<a name="53"/>#
<a name="54"/>############################################################################
<a name="55"/>
<a name="56"/>package ipl.str2toks
<a name="57"/>
<a name="58"/>import
<a name="59"/>   ipl.scan(begin_analysis)
<a name="60"/>
<a name="61"/>procedure str2toks(c, s, i, j)
<a name="62"/>
<a name="63"/>    local token, a
<a name="64"/>
<a name="65"/>    /c := ~(&amp;letters ++ &amp;digits)
<a name="66"/>
<a name="67"/>    a := begin_analysis(s, i, j) | fail
<a name="68"/>    s := a.s; i := a.i; j := a.j
<a name="69"/>
<a name="70"/>    s[i:j] ? {
<a name="71"/>	tab(many(c))
<a name="72"/>	while token := tab(upto(c)) do {
<a name="73"/>	    suspend token
<a name="74"/>	    tab(many(c))
<a name="75"/>	}
<a name="76"/>	suspend "" ~== tab(0)
<a name="77"/>    }
<a name="78"/>
<a name="79"/>end
<a name="80"/>	
<a name="81"/>	
</pre></body></html>
