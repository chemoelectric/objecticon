package graphics

import 
   lang(NoCopy)

# This object contains pixel data either read from a file, extracted
# from a Window, or created from scratch.  The data is stored in
# various underlying formats depending on the source.
#
class Pixels()
   private
      idp

   public static const
      RGB24,
      BGR24,
      RGBA32,
      ABGR32,
      RGB48,
      RGBA64,
      G8,
      GA16,
      AG16,
      G16,
      GA32,
      PALETTE

   private static init()
      RGB24     :=  1
      BGR24     :=  2
      RGBA32    :=  3
      ABGR32    :=  4
      RGB48     :=  5
      RGBA64    :=  6
      G8        :=  7
      GA16      :=  8
      AG16      :=  9
      G16       :=  10
      GA32      :=  11
      PALETTE   :=  20
   end

   # Get the width of the block
   #
   public native get_width()

   # Get the height of the block
   #
   public native get_height()

   # Get the pixel at the given position as an Icon colour string;
   # indices run from 0 to width-1 and 0 to height-1 respectively.
   #
   public native get(x, y)

   # Set the pixel to the given Icon colour string value, and with the
   # given optional alpha value.
   #
   public native set(x, y, v, a)

   # Get the given pixel as an 4 element list giving the rgba values.
   #
   public native get_rgba(x, y)

   # Set the given pixel to the given rgba integer values.
   #
   public native set_rgba(x, y, r, g, b, a)

   # Dispose of the object, freeing the memory used by the block
   #
   public native close()

   # Get the format of the underlying data, which will be one of the constant values listed above.
   #
   public native get_format()

   # Get the format, as a string.
   #
   public get_format_str()
      return case get_format() of {
         RGB24: "RGB24"
         BGR24: "BGR24"
         RGBA32: "RGBA32"
         ABGR32: "ABGR32"
         RGB48: "RGB48"
         RGBA64: "RGBA64"
         G8: "G8"
         GA16: "GA16"
         AG16: "AG16"
         G16: "G16"
         GA32: "GA32"
         PALETTE: "PALETTE"
      }
   end

   # Get the raw underlying data as a string.
   #
   public native get_data()

   # Set the raw underlying data from a string, padding with zeroes if
   # the string is too short.
   #
   public native set_data(s)

   # Change the dimensions.  The underlying data is expanded if
   # necessary and padded with zeroes.
   #
   public native set_size(width, height)

   # Convert this instance to another separate instance in the given
   # new format, which cannot be PALETTE.
   #
   public convert(format)
      return Pixels(convert_impl(format))
   end

   private native convert_impl(format)

   # Convenient method to generate 0 to get_width() - 1
   #
   public x_range()
      suspend 0 to get_width() - 1
   end

   # Convenient method to generate 0 to get_height() - 1
   #
   public y_range()
      suspend 0 to get_height() - 1
   end

   # Generate all the pixels, from left-to-right, and top-to-bottom.
   # The first pixel is (0,0), then (1,0), (2,0) and so on.
   #
   public gen()
      local y
      every y := y_range() do
         suspend get(x_range(), y)
   end

   # Generate all the pixels, as rgba lists.
   #
   public gen_rgba()
      local y
      every y := y_range() do
         suspend get_rgba(x_range(), y)
   end

   # Return a new instance based on the given image string, which can
   # be raw image data, or a filename.
   #
   public static open(s)
      return Pixels(open_impl(s))
   end

   private static native open_impl(s)

   # Create a blank instance with the given format and dimensions.
   # The underlying data is allocated and set to zero.
   #
   public static blank(format, width, height)
      return Pixels(blank_impl(format, width, height))
   end

   private static native blank_impl(format, width, height)

   #
   # Encode the image to a file.
   #
   public native to_file(fname)


   # Get the palette entry at index i (0 to 255), as a 4-element list.
   # This and similar methods fails unless the format is PALETTE.
   #
   public native get_palette_rgba(i)

   # Set the palette entry at index i to the given rgba values.
   #
   public native set_palette_rgba(i, r, g, b, a)

   # Set the palette entry at index i to the given icon colour value,
   # with optional alpha specified as an integer.
   #
   public native set_palette(i, v, a)

   # Get the palette index contained at the given pixel location.
   #
   public native get_palette_index(x, y)

   # Set the palette index contained at the given pixel location.
   #
   public native set_palette_index(x, y, i)

   # Return a new instance which is an exact copy of this instance.
   # No data is shared.
   #
   public clone()
      return Pixels(clone_impl())
   end

   private final object_clone()
      return clone()
   end

   private native clone_impl()

   # Set entries in the palette according to one of the standard palettes (c1,c2 etc).
   #
   public native load_palette(pal)

   package new(idp)
      self.idp := idp
      return
   end
end

class Window(NoCopy)
   private
      wbp,
      transient_for

   public static const
      RESIZE,
      CLOSE_BUTTON,
      INVOKE_LATER

   private static init()
      RESIZE :=       -10
      CLOSE_BUTTON := -11
      INVOKE_LATER := -40
   end

   #
   # Open a new window.
   #
   public static open(display)
      return Window(open_impl(display))
   end

   #
   # Produces a new window value that combines the canvas of
   # {self} with a new graphics context. The new graphics attributes
   # are copied from {self}.
   #
   public clone()
      return Window(clone_impl())
   end

   #
   # Produces a new window value that binds the canvas of {self} with
   # the graphics context of {other}.
   #
   public couple(other)
      return Window(couple_impl(other))
   end

   private static native open_impl(display)
   private native clone_impl(a[])
   private native couple_impl(other)

   #
   # Grab the pointer so that all mouse events are directed to this window.
   #
   public native grab_pointer()

   #
   # Undoes the effect of {grab_pointer}.
   #
   public native ungrab_pointer()

   public native get_font_ascent()
   public native get_bg()
   public native get_canvas()
   public native get_clip()
   public native get_depth()
   public native get_font_descent()
   public native get_display()
   public native get_draw_op()
   public native get_dx()
   public native get_dy()
   public native get_fg()
   public native get_font_height()
   public native get_fill_style()
   public native get_font()
   public native get_font_width()
   public native get_geometry()
   public native get_height()
   public native get_input_mask()
   public native get_label()
   public native get_line_style()
   public native get_line_width()
   public native get_max_height()
   public native get_max_size()
   public native get_max_width()
   public native get_min_height()
   public native get_min_size()
   public native get_min_width()
   public native get_pattern()
   public native get_pointer()
   public native get_pos()
   public native get_x()
   public native get_y()
   public native can_resize()
   public native get_size()
   public native get_width()

   #
   # The graphics context attribute bg specifies current background
   # color.
   #
   public native set_bg(v)

   #
   # The canvas attribute canvas specifies the window visibility.
   # Possible values include "hidden", "iconic", "normal", "popup"
   #
   public native set_canvas(v)

   #
   # The graphics context attribute draw_op specifies the way in which
   # newly drawn pixels are combined with the pixels that are already
   # in a window.
   #
   public native set_draw_op(v)

   #
   # The graphics context attribute dx specifies a horizontal offset
   # that is added to the x value of every coordinate pair before
   # interpretation.
   #
   public native set_dx(v)

   #
   # The graphics context attribute dy specifies a vertical offset
   # that is added to the y value of every coordinate pair before
   # interpretation.
   #
   public native set_dy(v)

   #
   # The graphics context attribute fg specifies the current
   # foreground color.
   #
   public native set_fg(v)

   #
   # The graphics context attribute fill_style specifies whether a
   # pattern is to be used when drawing. The fill style affects lines
   # and text as well as solid figures. The pattern itself is set by
   # the pattern attribute.
   # Possible values: "solid", "textured", "masked"
   #
   public native set_fill_style(v)

   #
   # The graphics context attribute font specifies the current text font.
   #
   public native set_font(v)

   #
   # Specifies the position and size of the window.
   #
   public native set_geometry(x, y, width, height)

   #
   # Set the height of the window in pixels.
   #
   public native set_height(height)

   #
   # Specifies an image to load into the window.  On success, the
   # window is resized to the size of the image.  The given parameter
   # {v} may be raw binary image data (eg a gif file), or the name of
   # a file containing an image.
   #
   public set_image(v)
      if is(v, Pixels) then {
         set_size(v.get_width(), v.get_height())
         draw_image(0, 0, v)
      } else {
         v := Pixels.open(v) | fail
         set_size(v.get_width(), v.get_height())
         draw_image(0, 0, v)
         v.close()
      }
      return self
   end

   #
   # Set the input mask for the window.  If the string {v} contains
   # "k" then key release events are reported; if it contains "m" then
   # mouse motion events are reported.
   #
   public native set_input_mask(v)

   #
   # The canvas attribute icon specifies an image used to identify the
   # window.  The parameter takes the same format as {set_image}.
   #
   public set_icon(v)
      local r
      if is(v, Pixels) then
         r := set_icon_impl(v)
      else {
         v := Pixels.open(v) | fail
         r := set_icon_impl(v)
         v.close()
      }
      return \r
   end

   private native set_icon_impl(id)

   #
   # The canvas attribute label specifies a title used to identify the
   # window.
   #
   public native set_label(v)

   #
   # The graphics context attribute line_style specifies the form of
   # drawn lines.  Possible values may include: "solid", "dashed",
   # "striped", although this is system dependent.
   #
   public native set_line_style(v)

   #
   # The graphics context attribute linewidth specifies the width of
   # drawn lines.
   #
   public native set_line_width(v)

   #
   # Set the maximum height of the window in pixels.
   #
   public native set_max_height(height)

   #
   # Set the maximum size of the window in pixels.
   #
   public native set_max_size(width, height)

   #
   # Set the maximum width of the window in pixels.
   #
   public native set_max_width(width)

   #
   # Set the minimum height of the window in pixels.
   #
   public native set_min_height(height)

   #
   # Set the minimum size of the window in pixels.
   #
   public native set_min_size(width, height)

   #
   # Set the minimum width of the window in pixels.
   #
   public native set_min_width(width)

   #
   # The graphics context attribute pattern specifies the particular
   # pattern to be used for drawing when the fill_style attribute is
   # set to "textured" or "masked".  Possible values: "black",
   # "verydark", "darkgray", "gray", "lightgray", "verylight",
   # "white", "vertical", "diagonal", "horizontal", "grid", "trellis",
   # "checkers", "grains", "scales", "waves", "width,#hexdigits"
   #
   public native set_pattern(v)

   #
   # The canvas attribute pointer specifies the shape of the figure
   # that represents the mouse position.
   #
   public native set_pointer(v)

   #
   # Set the position of the window on the screen.
   #
   public native set_pos(x, y)

   #
   # Set the x position of the window on the screen.
   #
   public native set_x(v)

   #
   # Set the y position of the window on the screen.
   #
   public native set_y(v)

   #
   # Configure whether the window can or cannot be resized by the
   # user.  The parameter should be a flag value.
   #
   public native set_resize(v)

   #
   # Set the size of the window in pixels.
   #
   public native set_size(width, height)

   #
   # Set the width of the window in pixels.
   #
   public native set_width(width)

   #
   # Configure this window so that it is transient in respect of the
   # given window {w}.  This generally means that the transient window
   # stays on top of the other window, although the exact behaviour
   # depends on the window system.
   # 
   # When calling this method, this window must not be visible, and
   # the other window must be visible; if that is not the case this
   # method fails.
   #
   public set_transient_for(w)
      if set_transient_for_impl(w) then {
         self.transient_for := w
         return self
      }
   end

   private native set_transient_for_impl(v)

   #
   # Get the transient-for window, or fail if none is set.
   #
   public get_transient_for()
      return \self.transient_for
   end

   #
   # Produces a beep or other signal to attract attention.
   #
   public native alert(volume)

   #
   # Sets the clipping region to the specified rectangle; subsequent
   # output extending outside its bounds is discarded. If clip() is
   # called with no arguments, clipping is disabled and the entire
   # canvas is writable.
   #
   public native clip(x, y, w, h)

   #
   # Clear the clip settings
   #
   public native unclip()

   #
   # Return the r,g,b values of the given color, as a color string
   #
   public static native color_value(k)

   #
   # Return the r,g,b values of the given color, as a list of 3 integers.
   #
   public static native parse_color(k)

   #
   # draw_arc(x, y, width, height, angle1, angle2)
   #
   public native draw_arc(x, y, width, height, angle1, angle2)

   #
   # event() - return an event from this window, failing if none is available.
   #
   public native event()

   #
   # draw_circle(x, y, r, theta, alpha)
   #
   public native draw_circle(x, y, r, theta, alpha)

   #
   # draw_curve(x1,y1,...xN,yN)
   # Draw a smooth curve through the given points.
   #
   public native draw_curve(a[])

   #
   # Draw an image.  The image can be raw image data, a filename, or a
   # {Pixels} instance.
   #
   public draw_image(x, y, v)
      if is(v, Pixels) then
         draw_image_impl(x, y, v)
      else {
         v := Pixels.open(v) | fail
         draw_image_impl(x, y, v)
         v.close()
      }
      return self
   end

   private native draw_image_impl(x, y, d)

   #
   # Copy an area from this window to another window.
   #
   public native copy_to(dest, x1, y1, w, h, x2, y2)

   #
   # draw_line(x1,y1,...xN,yN)
   #
   public native draw_line(a[])

   #
   # draw_point(x, y)
   #
   public native draw_point(x, y)

   #
   # draw_polygon(x1,y1,...xN,yN)
   #
   public native draw_polygon(a[])

   #
   # draw_rectangle(x, y, width, height)
   #
   public native draw_rectangle(x, y, width, height)

   #
   # draw_string(x, y, s)
   #
   public native draw_string(x, y, s)

   #
   # erase_area(x,y,width,height) - clear an area of the window
   #
   public native erase_area(x, y, width, height)

   #
   # pending(x[]) - add to and then produce a list of events pending on window
   #
   public native pending(a[])

   #
   # fill_arc(x, y, width, height, angle1, angle2)
   #
   public native fill_arc(x, y, width, height, angle1, angle2)

   #
   # fill_circle(x, y, r, theta, alpha)
   #
   public native fill_circle(x, y, r, theta, alpha)

   #
   # fill_polygon(x1, y1, ...xN, yN)
   #
   public native fill_polygon(a[])

   #
   # fill_rectangle(x, y, width, height)
   #
   public native fill_rectangle(x, y, width, height)

   #
   # Lower this window to the bottom of the window stack
   #
   public native lower()

   #
   # Return the characters forming keys to palette p
   #
   public static native palette_chars(p)

   #
   # Return color of key s1 in palette s2
   #
   public static native palette_color(s1, s2)

   #
   # Return key of closest color to s in palette p
   #
   public static native palette_key(s1, s2)

   #
   # Get the contents of some pixels as a {Pixels} object.
   #
   public get_pixels(format, x, y, width, height)
      return Pixels(get_pixels_impl(format, x, y, width, height))
   end

   private native get_pixels_impl(format, x, y, width, height)

   #
   # Filter the given pixels according to the given filter spec.
   #
   public native filter(filter, x, y, width, height)

   #
   # Return a rectangle (as a list of four integers), representing
   # that part of the given rectangle which would be drawable on the
   # canvas; ie the intersection of the rectangle, the window and the
   # clip area if set.  If the result would be an empty area, the
   # method fails.
   #
   public native drawable(x, y, width, height)

   #
   # Return the current root x, y position as a two-element list.
   #
   public native query_root_pointer()

   #
   # Return the current display size. as a two-element list.
   #
   public native get_display_size()

   #
   # Return the current x, y position as a two-element list, relative to
   # this window.
   #
   public native query_pointer()

   #
   # Warp the pointer to the given location, relative to this window.
   #
   public native warp_pointer(x, y)

   #
   # Raise window to the top of the window stack
   #
   public native raise()

   #
   # Returns the width of string s, in pixels, as drawn using the
   # current font.
   #
   public native text_width(s)

   #
   # Frees the window. If no other bindings to the same canvas exist,
   # the window is closed.
   #
   public native uncouple()

   #
   # Set the window system's selection
   #
   public native own_selection(selection)

   #
   # Send a response to a selection request event.
   #
   public native send_selection_response(requestor, property, target, selection, data)

   #
   # Get the window system's selection
   #
   public native request_selection(selection, target_type)

   #
   # Close this window.
   #
   public native close()

   #
   # Enqueue a window event.
   #
   public enqueue(eventcode, x, y, time, mod)
      /x := -1
      /y := -1
      x +:= get_dx()
      y +:= get_dy()
      /time := 0
      /mod := 0
      return pending(eventcode, x, y, time, mod)
   end

   #
   # Convenient method to open an image and return a hidden window with
   # its contents.
   # @param img the image
   # @param win an optional window from which to get the background and
   #            foreground colours (only relevant with transparent images).
   #
   public static open_image(img, win)
      local w
      w := if /win then
         Window.open()
      else
         Window.open().
           set_fg(win.get_fg()).
           set_bg(win.get_bg()).
           erase_area()
      w.set_image(img) | {
         w.close()
         fail
      }
      return w
   end

   private new(wbp)
      self.wbp := wbp
      return
   end
end

#
# Event codes for selection events.
#
class Selection()
   public static const
      # Selection request event
      REQUEST,     
      # Selection response event
      RESPONSE,
      # Selection clear event
      CLEAR,
      # Set of any of the three event types
      EVENTS,
      PRIMARY,
      SECONDARY,
      CLIPBOARD,
      UTF8_STRING_TARGET,
      STRING_TARGET,
      URI_LIST_TARGET,
      TARGETS_TARGET

   private static init()
      REQUEST := -30
      CLEAR := -31
      RESPONSE := -32
      EVENTS := set(REQUEST, CLEAR, RESPONSE)
      PRIMARY := "PRIMARY"      # These 3 must correspond to X Atom names.
      SECONDARY := "SECONDARY"
      CLIPBOARD := "CLIPBOARD"
      STRING_TARGET := "STRING"
      UTF8_STRING_TARGET := "UTF8_STRING"
      URI_LIST_TARGET := "text/uri-list"
      TARGETS_TARGET := "TARGETS"
   end
end

#
# Event codes for mouse events.
#
class Mouse()
   public static const
      LEFT_PRESS,
      MIDDLE_PRESS,
      RIGHT_PRESS,
      PRESS,
      LEFT_RELEASE,
      MIDDLE_RELEASE,
      RIGHT_RELEASE,
      RELEASE,
      DRAG,
      MOVEMENT,
      WHEEL_UP,
      WHEEL_DOWN,
      WHEEL,
      DRAG_OR_MOVEMENT,
      ENTER,
      EXIT,
      CROSSING

   private static init()
      LEFT_PRESS :=           -1
      MIDDLE_PRESS :=         -2
      RIGHT_PRESS :=          -3
      PRESS := set(LEFT_PRESS, MIDDLE_PRESS, RIGHT_PRESS)
      LEFT_RELEASE :=         -4
      MIDDLE_RELEASE :=       -5
      RIGHT_RELEASE :=        -6
      RELEASE := set(LEFT_RELEASE, MIDDLE_RELEASE, RIGHT_RELEASE)
      MOVEMENT :=            -12
      WHEEL_UP :=            -16
      WHEEL_DOWN :=          -17
      WHEEL := set(WHEEL_UP, WHEEL_DOWN)
      ENTER :=               -18
      EXIT :=                -19
      CROSSING := set(ENTER, EXIT)
      DRAG :=                -20
      DRAG_OR_MOVEMENT := set(DRAG, MOVEMENT)
   end
end

#
# Event codes for key events.
#
class Key()
   public static const
      # Modifier flags
      MOD_SHIFT,
      MOD_LOCK,
      MOD_CTRL,
      MOD_META,
      MOD_META2,
      MOD_META3,
      MOD_META4,
      MOD_META5,
      MOD_RELEASE,
      # Key event codes
      SHIFT_TAB,
      COMPOSE,
      DO,
      DOWN,
      END,
      F1,
      F2,
      F3,
      F4,
      F5,
      F6,
      F7,
      F8,
      F9,
      F10,
      F11,
      F12,
      F13,
      F14,
      F15,
      F16,
      F17,
      F18,
      F19,
      F20,
      F21,
      F22,
      F23,
      F24,
      FIND,
      HELP,
      HOME,
      INSERT,
      KP_DOWN,
      KP_LEFT,
      KP_RIGHT,
      KP_UP,
      L1,
      L2,
      L3,
      L4,
      L5,
      L6,
      L7,
      L8,
      L9,
      L10,
      LEFT,
      PF1,
      PF2,
      PF3,
      PF4,
      PAUSE,
      PGDN,
      PGUP,
      PRSC,
      R1,
      R2,
      R3,
      R4,
      R5,
      R6,
      R7,
      R8,
      R9,
      R10,
      R11,
      R12,
      R13,
      R14,
      R15,
      RIGHT,
      SCROLL_LOCK,
      SELECT,
      UP,
      CURSOR,
      CURSOR_V,
      CURSOR_H,
      SUPER_L,
      SUPER_R,
      MENU,
      NAVIGATE

   private static init()
      MOD_SHIFT :=    1
      MOD_LOCK :=     2
      MOD_CTRL :=     4
      MOD_META :=     8 
      MOD_META2 :=   16
      MOD_META3 :=   32
      MOD_META4 :=   64
      MOD_META5 :=   128
      MOD_RELEASE := 256
$ifdef _X_WINDOW_SYSTEM
      SHIFT_TAB :=           65056
      COMPOSE :=             65312
      DO :=                  65383
      DOWN :=                65364
      END :=                 65367
      F1 :=                  65470
      F2 :=                  65471
      F3 :=                  65472
      F4 :=                  65473
      F5 :=                  65474
      F6 :=                  65475
      F7 :=                  65476
      F8 :=                  65477
      F9 :=                  65478
      F10 :=                 65479
      F11 :=                 65480
      F12 :=                 65481
      F13 :=                 65482
      F14 :=                 65483
      F15 :=                 65484
      F16 :=                 65485
      F17 :=                 65486
      F18 :=                 65487
      F19 :=                 65488
      F20 :=                 65489
      FIND :=                65384
      HELP :=                65386
      HOME :=                65360
      INSERT :=              65379
      KP_DOWN :=             65433
      KP_LEFT :=             65430
      KP_RIGHT :=            65432
      KP_UP :=               65431
      L1 :=                  65480  # clash with f11
      L2 :=                  65481  # clash with f12
      L3 :=                  65482
      L4 :=                  65483
      L5 :=                  65484
      L6 :=                  65485
      L7 :=                  65486
      L8 :=                  65487
      L9 :=                  65488
      L10 :=                 65489
      LEFT :=                65361
      PF1 :=                 65425
      PF2 :=                 65426
      PF3 :=                 65427
      PF4 :=                 65428
      PAUSE :=               65299
      PGDN :=                65366
      PGUP :=                65365
      PRSC :=                65377
      R1 :=                  65490
      R2 :=                  65491
      R3 :=                  65492
      R4 :=                  65493
      R5 :=                  65494
      R6 :=                  65495
      R7 :=                  65496
      R8 :=                  65497
      R9 :=                  65498
      R10 :=                 65499
      R11 :=                 65500
      R12 :=                 65501
      R13 :=                 65502
      R14 :=                 65503
      R15 :=                 65504
      RIGHT :=               65363
      SCROLL_LOCK :=         65300
      SELECT :=              65376
      UP :=                  65362
      SUPER_L :=             65515
      SUPER_R :=             65516
      MENU :=                65383
$elsifdef _MS_WIN32
      DOWN :=               40
      END :=                35
      SCROLL_LOCK :=        145
      F1 :=                 112
      F2 :=                 113
      F3 :=                 114
      F4 :=                 115
      F5 :=                 116
      F6 :=                 117
      F7 :=                 118
      F8 :=                 119
      F9 :=                 120
      F10 :=                121
      F11 :=                122
      F12 :=                123
      F13 :=                124
      F14 :=                125
      F15 :=                126
      F16 :=                127
      F17 :=                128
      F18 :=                129
      F19 :=                130
      F20 :=                131
      F21 :=                132
      F22 :=                133
      F23 :=                134
      F24 :=                135
      HELP :=               47
      HOME :=               36
      INSERT :=             45
      LEFT :=               37
      PAUSE :=              19
      PGDN :=               34
      PGUP :=               33
      PRSC :=               44
      RIGHT :=              39
      SELECT :=             41
      UP :=                 38
      SHIFT_TAB :=          0
      COMPOSE :=            0
      DO :=                 0
      FIND :=               0
      KP_DOWN :=            0
      KP_LEFT :=            0
      KP_RIGHT :=           0
      KP_UP :=              0
      L1 :=                 0
      L2 :=                 0
      L3 :=                 0
      L4 :=                 0
      L5 :=                 0
      L6 :=                 0
      L7 :=                 0
      L8 :=                 0
      L9 :=                 0
      L10 :=                0
      PF1 :=                0
      PF2 :=                0
      PF3 :=                0
      PF4 :=                0
      R1 :=                 0
      R2 :=                 0
      R3 :=                 0
      R4 :=                 0
      R5 :=                 0
      R6 :=                 0
      R7 :=                 0
      R8 :=                 0
      R9 :=                 0
      R10 :=                0
      R11 :=                0
      R12 :=                0
      R13 :=                0
      R14 :=                0
      R15 :=                0
      SUPER_L :=            0
      SUPER_R :=            0
      MENU :=               0
$endif
      NAVIGATE := set(UP, DOWN, LEFT, RIGHT, PGUP, PGDN, HOME, END)
      CURSOR := set(UP, DOWN, LEFT, RIGHT)
      CURSOR_V := set(UP, DOWN)
      CURSOR_H := set(LEFT, RIGHT)
   end
end
