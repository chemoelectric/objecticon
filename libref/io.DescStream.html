<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>DescStream</title></head><body>
<h1>DescStream</h1>
<dl>
<dt>Type :</dt><dd>abstract class</dd>
<dt>Superclasses :</dt><dd>
<a href="io.Stream.html" target="displayFrame">io.Stream</a><br>
<a href="lang.NoCopy.html" target="displayFrame">lang.NoCopy</a><br>
</dd>
<dt>Subclasses :</dt><dd>
<a href="gui.EventStream.html">gui.EventStream</a><br>
<a href="io.SocketStream.html">io.SocketStream</a><br>
<a href="io.FileStream.html">io.FileStream</a><br>
</dd>
<dt>Package :</dt><dd><a href="io-package.html" target="listFrame">io</a></dd>
</dl><p/>
This is the parent class of streams based on a posix-style
integer-based file descriptor.
<p/><a href="io-streams.icn.html#617" target="displayFrame">Source - streams.icn </a>
<p/>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#ccccff">
<td colspan=1><font size="+2">
<b>Class summary</b></font></td>
</tr>
</table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Implemented classes</b></td></tr>
<tr bgcolor="white"><td>
<a href="lang.ObjectCodec.html">lang.ObjectCodec</a>
<a href="lang.Unencodable.html">lang.Unencodable</a>
<a href="lang.ObjectClone.html">lang.ObjectClone</a>
<a href="lang.SelfClone.html">lang.SelfClone</a>
<a href="lang.NoCopy.html">lang.NoCopy</a>
<a href="util.HasMode.html">util.HasMode</a>
<a href="util.HasClose.html">util.HasClose</a>
<a href="io.Stream.html">io.Stream</a>
<a href="io.DescStream.html">io.DescStream</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods inherited from lang.Unencodable</b></td></tr>
<tr bgcolor="white"><td>
<a href="lang.Unencodable.html#object_decode">object_decode()</a>
<a href="lang.Unencodable.html#object_encode">object_encode()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods inherited from lang.SelfClone</b></td></tr>
<tr bgcolor="white"><td>
<a href="lang.SelfClone.html#object_clone">object_clone()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods inherited from util.HasMode</b></td></tr>
<tr bgcolor="white"><td>
<a href="util.HasMode.html#can">can()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods inherited from util.HasClose</b></td></tr>
<tr bgcolor="white"><td>
<a href="util.HasClose.html#close">close()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods inherited from io.Stream</b></td></tr>
<tr bgcolor="white"><td>
<a href="io.Stream.html#copy_to">copy_to()</a>
<a href="io.Stream.html#gen">gen()</a>
<a href="io.Stream.html#in">in()</a>
<a href="io.Stream.html#init">init()</a>
<a href="io.Stream.html#out">out()</a>
<a href="io.Stream.html#read">read()</a>
<a href="io.Stream.html#read_all">read_all()</a>
<a href="io.Stream.html#read_exactly">read_exactly()</a>
<a href="io.Stream.html#read_line">read_line()</a>
<a href="io.Stream.html#reads">reads()</a>
<a href="io.Stream.html#seek">seek()</a>
<a href="io.Stream.html#tell">tell()</a>
<a href="io.Stream.html#truncate">truncate()</a>
<a href="io.Stream.html#write">write()</a>
<a href="io.Stream.html#write1">write1()</a>
<a href="io.Stream.html#writes">writes()</a>
<a href="io.Stream.html#writes1">writes1()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Variables inherited from io.Stream</b></td></tr>
<tr bgcolor="white"><td>
<a href="io.Stream.html#ALL">ALL</a>
<a href="io.Stream.html#READ">READ</a>
<a href="io.Stream.html#READ_WRITE">READ_WRITE</a>
<a href="io.Stream.html#SEEK">SEEK</a>
<a href="io.Stream.html#TRUNCATE">TRUNCATE</a>
<a href="io.Stream.html#WRITE">WRITE</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Methods defined in this class</b></td></tr>
<tr bgcolor="white"><td>
<a href="#dflag">dflag()</a>
<a href="#dup2">dup2()</a>
<a href="#dup2_impl">dup2_impl()</a>
<a href="#dup_impl">dup_impl()</a>
<a href="#flag">flag()</a>
<a href="#get_fd">get_fd()</a>
<a href="#get_mode">get_mode()</a>
<a href="#improve_why">improve_why()</a>
<a href="#poll">poll()</a>
<a href="#poll_in_test">poll_in_test()</a>
<a href="#poll_out_test">poll_out_test()</a>
<a href="#setup">setup()</a>
<a href="#stat">stat()</a>
<a href="#stat_impl">stat_impl()</a>
<a href="#wstat">wstat()</a>
</td></tr></table>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#eeeeff">
<td><b>Variables defined in this class</b></td></tr>
<tr bgcolor="white"><td>
<a href="#fd">fd</a>
<a href="#mode">mode</a>
</td></tr></table>
<p/>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#ccccff">
<td colspan=1><font size="+2">
<b>Method detail</b></font></td>
</tr>
</table>
<a name="dflag"/>
<h3>dflag(on, off)</h3>
public native<p/>
<dl>
<dd>
Turn the specified descriptor flags on or off, and return the new
set of flags.  The flags should be selected from the constants in
<code><a href="io.DescOpt.html" target="displayFrame">DescOpt</a></code>.
<dl>
<dt>
Parameters :
</dt>
<dd>
<code>on</code> - the flags to turn on
</dd>
<dd>
<code>off</code> - the flags to turn off
</dd>
<dt>
Returns :
</dt>
<dd>
the new flags
</dd>
</dl>
<p/><a href="io-streams.icn.html#696" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="dup2"/>
<h3>dup2(other)</h3>
public<p/>
<dl>
<dd>
Invokes the system function dup2(oldfd, newfd), with oldfd set to
this instance's <code><a href="io.DescStream.html#fd">fd</a></code>, and newfd set to the given parameter's <code><a href="io.DescStream.html#fd">fd</a></code>.
<p/>
On error this method fails and sets <code>&amp;why</code>.  On success, it sets
the mode of the target to this instances's mode (since they both
now point to the same file), and returns <code>&amp;null</code>.
<p/>
For example :-
<pre>
  f := FileStream("/tmp/xyz", 
      ior(FileOpt.WRONLY, FileOpt.TRUNC, FileOpt.CREAT)) | stop(&amp;why)
  f.dup2(FileStream.stdout) | stop(&amp;why)
  f.close()
  write("hello world")  # writes to /tmp/xyz
</pre>
<dl>
<dt>
Parameters :
</dt>
<dd>
<code>other</code> - a <code><a href="io.DescStream.html" target="displayFrame">DescStream</a></code>
</dd>
</dl>
<p/><a href="io-streams.icn.html#708" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="dup2_impl"/>
<h3>dup2_impl()</h3>
private native<p/>
<dl>
<dd>
<p/><a href="io-streams.icn.html#732" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="dup_impl"/>
<h3>dup_impl()</h3>
protected native<p/>
<dl>
<dd>
<p/><a href="io-streams.icn.html#734" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="flag"/>
<h3>flag(on, off)</h3>
public native<p/>
<dl>
<dd>
Turn the specified flags on or off, and return the new set of
flags.  The flags should be selected from the constants in
<code><a href="io.FileOpt.html" target="displayFrame">FileOpt</a></code>.
<dl>
<dt>
Parameters :
</dt>
<dd>
<code>on</code> - the flags to turn on
</dd>
<dd>
<code>off</code> - the flags to turn off
</dd>
<dt>
Returns :
</dt>
<dd>
the new flags
</dd>
</dl>
<p/><a href="io-streams.icn.html#684" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="get_fd"/>
<h3>get_fd()</h3>
public<p/>
<dl>
<dd>
Return the integer file descriptor; fails if the stream is
closed.
<p/><a href="io-streams.icn.html#626" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="get_mode"/>
<h3>get_mode()</h3>
public override<p/>
<dl>
<dd>Overrides <a href="util.HasMode.html#get_mode">get_mode()</a> in <a href="util.HasMode.html" target="displayFrame">util.HasMode</a></dd>
<dd>
<p/><a href="io-streams.icn.html#634" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="improve_why"/>
<h3>improve_why(v)</h3>
public<p/>
<dl>
<dd>
Try to set <code>&amp;why</code> to a helpful value based on any error value
stored in the stream.  This is particularly useful after <code><a href="io.DescStream.html#poll">poll</a></code>
has indicated an error.  <code>v</code> is an optional default value of
<code>&amp;why</code>.
<p/><a href="io-streams.icn.html#674" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="poll"/>
<h3>poll(l, timeout)</h3>
public static native<p/>
<dl>
<dd>
Performs a poll on one or more streams, each of which must be a
<code><a href="io.DescStream.html" target="displayFrame">DescStream</a></code>.  The parameter <code>l</code> is a list of pairs.  Each pair
is a <code><a href="io.Stream.html" target="displayFrame">Stream</a></code> followed by flags, which should be selected from
those constants in the <code><a href="io.Poll.html" target="displayFrame">Poll</a></code> class.  The last argument is the
optional timeout. The result is a list of the flags corresponding
to each <code><a href="io.Stream.html" target="displayFrame">Stream</a></code> provided.  This method fails on error, setting
<code>&amp;why</code> accordingly.  On a timeout, it succeeds and returns
<code>&amp;null</code>.
<p/><a href="io-streams.icn.html#638" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="poll_in_test"/>
<h3>poll_in_test(v)</h3>
public static<p/>
<dl>
<dd>
Utility to check whether the result of a <code><a href="io.DescStream.html#poll">poll</a></code> for <code><a href="io.Poll.html#IN">Poll.IN</a></code> indicates
a call to <code><a href="io.Stream.html#in">in</a></code>.
<p/><a href="io-streams.icn.html#650" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="poll_out_test"/>
<h3>poll_out_test(v)</h3>
public static<p/>
<dl>
<dd>
Utility to check whether the result of a <code><a href="io.DescStream.html#poll">poll</a></code> for <code><a href="io.Poll.html#OUT">Poll.OUT</a></code> indicates
a call to <code><a href="io.Stream.html#out">out</a></code>.
<p/><a href="io-streams.icn.html#663" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="setup"/>
<h3>setup(fd, mode)</h3>
protected<p/>
<dl>
<dd>
Helper function for initialization methods.
<p/><a href="io-streams.icn.html#761" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="stat"/>
<h3>stat()</h3>
public<p/>
<dl>
<dd>
Return a <code><a href="io.Stat.html" target="displayFrame">Stat</a></code> object with info about this file.
<p/><a href="io-streams.icn.html#736" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="stat_impl"/>
<h3>stat_impl()</h3>
private native<p/>
<dl>
<dd>
<p/><a href="io-streams.icn.html#743" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="wstat"/>
<h3>wstat(mode, uid, gid, atime, mtime, atime_ns, mtime_ns)</h3>
public native<p/>
<dl>
<dd>
Write selected attributes about a file.  If any of the parameters
are <code>&amp;null</code>, they are left unchanged.  The nanosecond parameters
are ignored unless their corresponding time fields are being set.
<p/>
<dl>
<dt>
Parameters :
</dt>
<dd>
<code>mode</code> - the mode (an integer)
</dd>
<dd>
<code>uid</code> - the owner id
</dd>
<dd>
<code>gid</code> - the group id
</dd>
<dd>
<code>atime</code> - the access time (an integer)
</dd>
<dd>
<code>mtime</code> - the modification time (an integer)
</dd>
<dd>
<code>atime_ns</code> - the access time nanosecond part (an integer, default 0)
</dd>
<dd>
<code>mtime_ns</code> - the modification time nanosecond part (an integer, default 0)
</dd>
</dl>
<p/><a href="io-streams.icn.html#745" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<table border="1" cellpadding="3" cellspacing="0" width="100%">
<tr bgcolor="#ccccff">
<td colspan=1><font size="+2">
<b>Variable detail</b></font></td>
</tr>
</table>
<a name="fd"/>
<h3>fd</h3>
protected<p/>
<dl>
<dd>
<p/><a href="io-streams.icn.html#623" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
<a name="mode"/>
<h3>mode</h3>
protected<p/>
<dl>
<dd>
<p/><a href="io-streams.icn.html#624" target="displayFrame">Source - streams.icn </a>
</dd>
</dl><hr>
</body></html>
