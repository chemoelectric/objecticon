<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>borders.icn</title></head><body><pre>
<a name="1"/>package gui
<a name="2"/>
<a name="3"/>import util
<a name="4"/>
<a name="5"/>#
<a name="6"/># A `ABorder` (so named to avoid a clash with the `Border` component),
<a name="7"/># is an object which represents a border.  It reports the widths of
<a name="8"/># the four edges of its border.  Given a rectangle, it also draws the
<a name="9"/># border on a Window.
<a name="10"/>#
<a name="11"/># An `ABorder` also subclasses `XYAlign`.  This lets it position a
<a name="12"/># `Size` within a `Rect` by "floating" it within the bordered inner
<a name="13"/># area according to the alignment.
<a name="14"/>#
<a name="15"/>abstract class ABorder(Insets,XYAlign)
<a name="16"/>   public abstract initially(c)
<a name="17"/>   public abstract draw(W, x, y, w, h)
<a name="18"/>
<a name="19"/>   public finally()
<a name="20"/>   end
<a name="21"/>
<a name="22"/>   public draw_rect(W, r)
<a name="23"/>      self.draw(W, r.x, r.y, r.w, r.h)
<a name="24"/>   end
<a name="25"/>
<a name="26"/>   public draw_rev(W, x, y, w, h)
<a name="27"/>      self.draw(W, x, y, w, h)
<a name="28"/>   end
<a name="29"/>
<a name="30"/>   public draw_rev_rect(W, r)
<a name="31"/>      self.draw_rev(W, r.x, r.y, r.w, r.h)
<a name="32"/>   end
<a name="33"/>
<a name="34"/>   public draw_focus_rect(W, r, t)
<a name="35"/>      self.draw_focus(W, r.x, r.y, r.w, r.h, t)
<a name="36"/>   end
<a name="37"/>
<a name="38"/>   public draw_focus(W, x, y, w, h, t)
<a name="39"/>      Gui.style.draw_focus_rectangle(W, x, y, w, h, t)
<a name="40"/>   end
<a name="41"/>
<a name="42"/>   public draw_dashed_rect(W, r, t)
<a name="43"/>      self.draw_dashed(W, r.x, r.y, r.w, r.h, t)
<a name="44"/>   end
<a name="45"/>
<a name="46"/>   public draw_dashed(W, x, y, w, h, t)
<a name="47"/>      Gui.style.draw_dashed_rectangle(W, x, y, w, h, t)
<a name="48"/>   end
<a name="49"/>
<a name="50"/>   public draw_highlight_rect(W, r, t)
<a name="51"/>      self.draw_highlight(W, r.x, r.y, r.w, r.h, t)
<a name="52"/>   end
<a name="53"/>
<a name="54"/>   public draw_highlight(W, x, y, w, h, t)
<a name="55"/>      Gui.style.draw_highlight_rectangle(W, x, y, w, h, t)
<a name="56"/>   end
<a name="57"/>
<a name="58"/>   public draw_down_rect(W, r)
<a name="59"/>      self.draw_down(W, r.x, r.y, r.w, r.h)
<a name="60"/>   end
<a name="61"/>
<a name="62"/>   public draw_down(W, x, y, w, h)
<a name="63"/>      Gui.style.fill_down_rectangle(W, x, y, w, h)
<a name="64"/>   end
<a name="65"/>
<a name="66"/>   #
<a name="67"/>   # Take a `Rect`, giving the bordered size, and a `Size`, giving an
<a name="68"/>   # object within it, and "float" it within the area in accordance
<a name="69"/>   # with the x and y alignment, but limiting the result to the
<a name="70"/>   # `Rect`.  A `Rect` is returned.
<a name="71"/>   #
<a name="72"/>   public float(r, s)
<a name="73"/>      return get_inner_rect(r).float(s, self)
<a name="74"/>   end
<a name="75"/>
<a name="76"/>   public set_x_align(x)
<a name="77"/>      self.x_align := x
<a name="78"/>      link
<a name="79"/>   end
<a name="80"/>      
<a name="81"/>   public set_y_align(y)
<a name="82"/>      self.y_align := y
<a name="83"/>      link
<a name="84"/>   end
<a name="85"/>      
<a name="86"/>   public set_align(x, y)
<a name="87"/>      set_x_align(x)
<a name="88"/>      set_y_align(y)
<a name="89"/>      link
<a name="90"/>   end
<a name="91"/>
<a name="92"/>   public new()
<a name="93"/>      x_align := y_align := Align.C
<a name="94"/>      return
<a name="95"/>   end
<a name="96"/>end
<a name="97"/>
<a name="98"/># A border with an arbitrary width, that is just empty space (ie
<a name="99"/># nothing is drawn).  The default l/r insets are Gui.X_INSET and t/b
<a name="100"/># insets Gui.Y_INSET.
<a name="101"/>#
<a name="102"/>class EmptyBorder(ABorder)
<a name="103"/>   public
<a name="104"/>      focus_inset
<a name="105"/>
<a name="106"/>   public override initially(c)
<a name="107"/>   end
<a name="108"/>
<a name="109"/>   public override draw(W, x, y, w, h)
<a name="110"/>   end
<a name="111"/>
<a name="112"/>   public set_insets(l, r, t, b)
<a name="113"/>      set_l_inset(l)
<a name="114"/>      set_r_inset(r)
<a name="115"/>      set_t_inset(t)
<a name="116"/>      set_b_inset(b)
<a name="117"/>      link
<a name="118"/>   end
<a name="119"/>
<a name="120"/>   public set_l_inset(n)
<a name="121"/>      self.l_inset := need_integer(n, 0)
<a name="122"/>      link
<a name="123"/>   end
<a name="124"/>
<a name="125"/>   public set_r_inset(n)
<a name="126"/>      self.r_inset := need_integer(n, 0)
<a name="127"/>      link
<a name="128"/>   end
<a name="129"/>
<a name="130"/>   public set_t_inset(n)
<a name="131"/>      self.t_inset := need_integer(n, 0)
<a name="132"/>      link
<a name="133"/>   end
<a name="134"/>
<a name="135"/>   public set_b_inset(n)
<a name="136"/>      self.b_inset := need_integer(n, 0)
<a name="137"/>      link
<a name="138"/>   end
<a name="139"/>
<a name="140"/>   # Set the inset between the notional edge of the border and any
<a name="141"/>   # drawn focus, dashed and highlight rectangles.  By default zero.
<a name="142"/>   #
<a name="143"/>   public set_focus_inset(n)
<a name="144"/>      self.focus_inset := need_integer(n, 0)
<a name="145"/>      link
<a name="146"/>   end
<a name="147"/>
<a name="148"/>   public override draw_focus(W, x, y, w, h, t)
<a name="149"/>      Gui.style.draw_focus_rectangle(W, x + focus_inset, y + focus_inset, 
<a name="150"/>                                     w - 2 * focus_inset, h - 2 * focus_inset,
<a name="151"/>                                     t)
<a name="152"/>   end
<a name="153"/>
<a name="154"/>   public override draw_dashed(W, x, y, w, h, t)
<a name="155"/>      Gui.style.draw_dashed_rectangle(W, x + focus_inset, y + focus_inset, 
<a name="156"/>                                      w - 2 * focus_inset, h - 2 * focus_inset,
<a name="157"/>                                      t)
<a name="158"/>   end
<a name="159"/>
<a name="160"/>   public override draw_highlight(W, x, y, w, h, t)
<a name="161"/>      Gui.style.draw_highlight_rectangle(W, x + focus_inset, y + focus_inset, 
<a name="162"/>                                         w - 2 * focus_inset, h - 2 * focus_inset,
<a name="163"/>                                         t)
<a name="164"/>   end
<a name="165"/>
<a name="166"/>   public override new()
<a name="167"/>      ABorder.new()
<a name="168"/>      l_inset := r_inset := Gui.X_INSET
<a name="169"/>      t_inset := b_inset := Gui.Y_INSET
<a name="170"/>      focus_inset := 0
<a name="171"/>      return
<a name="172"/>   end
<a name="173"/>end
<a name="174"/>
<a name="175"/>#
<a name="176"/># A border with zero size insets.
<a name="177"/>#
<a name="178"/>class NullBorder(ABorder)
<a name="179"/>   public override initially()
<a name="180"/>   end
<a name="181"/>
<a name="182"/>   public override draw(W, x, y, w, h)
<a name="183"/>   end
<a name="184"/>
<a name="185"/>   public override new()
<a name="186"/>      ABorder.new()
<a name="187"/>      l_inset := t_inset := r_inset := b_inset := 0
<a name="188"/>      return
<a name="189"/>   end
<a name="190"/>end
<a name="191"/>
<a name="192"/>#
<a name="193"/># A parent class for several borders which draw lines to display the
<a name="194"/># border.  The four insets are always of the same width.
<a name="195"/>#
<a name="196"/>abstract class LineBorder(ABorder)
<a name="197"/>   public line_width, focus_inset
<a name="198"/>
<a name="199"/>   public override initially()
<a name="200"/>      l_inset := t_inset := r_inset := b_inset := line_width
<a name="201"/>   end
<a name="202"/>
<a name="203"/>   public override draw_focus(W, x, y, w, h, th)
<a name="204"/>      local t
<a name="205"/>      t := line_width + focus_inset
<a name="206"/>      Gui.style.draw_focus_rectangle(W, x + t, y + t, w - 2 * t, h - 2 * t, th)
<a name="207"/>   end
<a name="208"/>
<a name="209"/>   public override draw_dashed(W, x, y, w, h, th)
<a name="210"/>      local t
<a name="211"/>      t := line_width + focus_inset
<a name="212"/>      Gui.style.draw_dashed_rectangle(W, x + t, y + t, w - 2 * t, h - 2 * t, th)
<a name="213"/>   end
<a name="214"/>
<a name="215"/>   public override draw_highlight(W, x, y, w, h, th)
<a name="216"/>      local t
<a name="217"/>      t := line_width + focus_inset
<a name="218"/>      Gui.style.draw_highlight_rectangle(W, x + t, y + t, w - 2 * t, h - 2 * t, th)
<a name="219"/>   end
<a name="220"/>
<a name="221"/>   public get_line_width()
<a name="222"/>      return self.line_width
<a name="223"/>   end
<a name="224"/>
<a name="225"/>   # Set the line width of this border; each of the four insets has this width.
<a name="226"/>   public set_line_width(n)
<a name="227"/>      self.line_width := need_integer(n, 0)
<a name="228"/>      link
<a name="229"/>   end
<a name="230"/>
<a name="231"/>   # Set the inset between the line border and any drawn focus, dashed
<a name="232"/>   # and highlight rectangles.  By default `Gui.FINE_WIDTH`.
<a name="233"/>   #
<a name="234"/>   public set_focus_inset(n)
<a name="235"/>      self.focus_inset := need_integer(n, 0)
<a name="236"/>      link
<a name="237"/>   end
<a name="238"/>
<a name="239"/>   public override new()
<a name="240"/>      ABorder.new()
<a name="241"/>      line_width := Gui.BORDER_WIDTH
<a name="242"/>      focus_inset := Gui.FINE_WIDTH
<a name="243"/>      return
<a name="244"/>   end
<a name="245"/>end
<a name="246"/>
<a name="247"/># A `LineBorder` displayed as a raised rectangle.
<a name="248"/>class RaisedBorder(LineBorder)
<a name="249"/>   public override draw(W, x, y, w, h)
<a name="250"/>      Gui.style.draw_raised_rectangle(W, x, y, w, h, line_width)
<a name="251"/>   end
<a name="252"/>
<a name="253"/>   public override draw_rev(W, x, y, w, h)
<a name="254"/>      Gui.style.draw_sunken_rectangle(W, x, y, w, h, line_width)
<a name="255"/>   end
<a name="256"/>end
<a name="257"/>
<a name="258"/># A `LineBorder` displayed as a sunken rectangle.
<a name="259"/>class SunkenBorder(LineBorder)
<a name="260"/>   public override draw(W, x, y, w, h)
<a name="261"/>      Gui.style.draw_sunken_rectangle(W, x, y, w, h, line_width)
<a name="262"/>   end
<a name="263"/>
<a name="264"/>   public override draw_rev(W, x, y, w, h)
<a name="265"/>      Gui.style.draw_raised_rectangle(W, x, y, w, h, line_width)
<a name="266"/>   end
<a name="267"/>end
<a name="268"/>
<a name="269"/># A `LineBorder` displayed as a bevelled rectangle.
<a name="270"/>class BevelledBorder(LineBorder)
<a name="271"/>   public override draw(W, x, y, w, h)
<a name="272"/>      Gui.style.draw_sunken_rectangle(W, x, y, w, h, line_width / 2)
<a name="273"/>      Gui.style.draw_raised_rectangle(W, x + line_width / 2, y + line_width / 2,
<a name="274"/>                                  w - line_width, h - line_width, line_width / 2)
<a name="275"/>   end
<a name="276"/>end
<a name="277"/>
<a name="278"/># A `LineBorder` displayed as a plain rectangle.
<a name="279"/>class PlainBorder(LineBorder)
<a name="280"/>   public override draw(W, x, y, w, h)
<a name="281"/>      W.draw_rectangle(x, y, w, h, line_width)
<a name="282"/>   end
<a name="283"/>end
<a name="284"/>
<a name="285"/>#
<a name="286"/># A border made up of two sub-borders.
<a name="287"/>#
<a name="288"/>class CompoundBorder(ABorder)
<a name="289"/>   public
<a name="290"/>      outer,
<a name="291"/>      inner
<a name="292"/>
<a name="293"/>   public override initially(c)
<a name="294"/>      outer.initially(c)
<a name="295"/>      inner.initially(c)
<a name="296"/>      l_inset := outer.l_inset + inner.l_inset
<a name="297"/>      r_inset := outer.r_inset + inner.r_inset
<a name="298"/>      t_inset := outer.t_inset + inner.t_inset
<a name="299"/>      b_inset := outer.b_inset + inner.b_inset
<a name="300"/>   end
<a name="301"/>
<a name="302"/>   public override finally()
<a name="303"/>      outer.finally()
<a name="304"/>      inner.finally()
<a name="305"/>   end
<a name="306"/>
<a name="307"/>   public override draw(W, x, y, w, h)
<a name="308"/>      outer.draw(W, x, y, w, h)
<a name="309"/>      inner.draw(W, x + outer.l_inset, y + outer.t_inset,
<a name="310"/>              w - outer.l_inset - outer.r_inset,
<a name="311"/>              h - outer.t_inset - outer.b_inset)
<a name="312"/>   end
<a name="313"/>
<a name="314"/>   public override draw_rev(W, x, y, w, h)
<a name="315"/>      outer.draw_rev(W, x, y, w, h)
<a name="316"/>      inner.draw_rev(W, x + outer.l_inset, y + outer.t_inset,
<a name="317"/>                     w - outer.l_inset - outer.r_inset,
<a name="318"/>                     h - outer.t_inset - outer.b_inset)
<a name="319"/>   end
<a name="320"/>
<a name="321"/>   public override draw_focus(W, x, y, w, h, t)
<a name="322"/>      outer.draw_focus(W, x, y, w, h, t)
<a name="323"/>   end
<a name="324"/>
<a name="325"/>   public override draw_dashed(W, x, y, w, h, t)
<a name="326"/>      outer.draw_dashed(W, x, y, w, h, t)
<a name="327"/>   end
<a name="328"/>
<a name="329"/>   public override draw_highlight(W, x, y, w, h, t)
<a name="330"/>      outer.draw_highlight(W, x, y, w, h, t)
<a name="331"/>   end
<a name="332"/>
<a name="333"/>   public override draw_down(W, x, y, w, h)
<a name="334"/>      outer.draw_down(W, x, y, w, h)
<a name="335"/>   end
<a name="336"/>
<a name="337"/>   public set_inner(inner)
<a name="338"/>      self.inner := inner
<a name="339"/>      link
<a name="340"/>   end
<a name="341"/>
<a name="342"/>   public set_outer(outer)
<a name="343"/>      self.outer := outer
<a name="344"/>      link
<a name="345"/>   end
<a name="346"/>end
</pre></body></html>
