<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>style.icn</title></head><body><pre>
<a name="1"/>package gui
<a name="2"/>
<a name="3"/>import ipl.graphics, util
<a name="4"/>
<a name="5"/>class Style()
<a name="6"/>   public static const
<a name="7"/>      TOOLTIP_BG,
<a name="8"/>      TOOLTIP_FG,
<a name="9"/>      TOOLTIP_FONT,
<a name="10"/>      FOCUS_COLOR,
<a name="11"/>      FOCUS_PATTERN,
<a name="12"/>      # Foreground color for message bar information.
<a name="13"/>      INFO_COLOR,
<a name="14"/>      ERROR_COLOR,
<a name="15"/>      DASHED_PATTERN,
<a name="16"/>      HIGHLIGHT_COLOR,
<a name="17"/>      HIGHLIGHT_PATTERN,
<a name="18"/>      CURSOR_COLOR,
<a name="19"/>      DOWN_COLOR,
<a name="20"/>      SELECTION_COLOR,
<a name="21"/>      OVER_COLOR,
<a name="22"/>      SHADE_FILTER,
<a name="23"/>      TICK_RATE_FACTOR,
<a name="24"/>      TICK_RATE_MAX,
<a name="25"/>      TICK_RATE_MIN
<a name="26"/>
<a name="27"/>   private static init()
<a name="28"/>      TOOLTIP_BG := env_color("OI_STYLE_TOOLTIP_BG") | "pale yellow"
<a name="29"/>      TOOLTIP_FG := env_color("OI_STYLE_TOOLTIP_FG") | "black"
<a name="30"/>      TOOLTIP_FONT := env_font("OI_STYLE_TOOLTIP_FONT") | "sans,*0.85"
<a name="31"/>      FOCUS_COLOR := env_color("OI_STYLE_FOCUS_COLOR") | "red"
<a name="32"/>      FOCUS_PATTERN := env_pattern("OI_STYLE_FOCUS_PATTERN") | "gray"
<a name="33"/>      INFO_COLOR := env_color("OI_STYLE_INFO_COLOR") | "red"
<a name="34"/>      ERROR_COLOR := env_color("OI_STYLE_ERROR_COLOR") | "red"
<a name="35"/>      DASHED_PATTERN := env_pattern("OI_STYLE_DASHED_PATTERN") | "gray"
<a name="36"/>      HIGHLIGHT_COLOR := env_color("OI_STYLE_HIGHLIGHT_COLOR") | "blue"
<a name="37"/>      HIGHLIGHT_PATTERN := env_pattern("OI_STYLE_HIGHLIGHT_PATTERN") | "gray"
<a name="38"/>      CURSOR_COLOR := env_color("OI_STYLE_CURSOR_COLOR") | FOCUS_COLOR
<a name="39"/>      DOWN_COLOR := env_color("OI_STYLE_DOWN_COLOR") | "black 20%"
<a name="40"/>      SELECTION_COLOR := env_color("OI_STYLE_SELECTION_COLOR") | "blue 30%"
<a name="41"/>      OVER_COLOR := env_color("OI_STYLE_OVER_COLOR") | "blue 8%"
<a name="42"/>      SHADE_FILTER := env_filter("OI_STYLE_SHADE_FILTER") | "shade,4,5000,40000"
<a name="43"/>      TICK_RATE_FACTOR := env_real("OI_STYLE_TICK_RATE_FACTOR", 1.0) | 3.0
<a name="44"/>      TICK_RATE_MAX := env_int("OI_STYLE_TICK_RATE_MAX", 10) | 200
<a name="45"/>      TICK_RATE_MIN := env_int("OI_STYLE_TICK_RATE_MIN", 5) | 20
<a name="46"/>   end
<a name="47"/>
<a name="48"/>   #
<a name="49"/>   # Draw a raised rectangle.
<a name="50"/>   #
<a name="51"/>   public draw_raised_rectangle(W, x, y, w, h, width)
<a name="52"/>      BevelRectangle(W, x, y, w, h, width)
<a name="53"/>      link
<a name="54"/>   end
<a name="55"/>
<a name="56"/>   #
<a name="57"/>   # Draw a sunken rectangle.
<a name="58"/>   #
<a name="59"/>   public draw_sunken_rectangle(W, x, y, w, h, width)
<a name="60"/>      BevelRectangle(W, x, y, w, h, -width)
<a name="61"/>      link
<a name="62"/>   end
<a name="63"/>
<a name="64"/>   public get_hilite_clone(W)
<a name="65"/>      W := W.clone()
<a name="66"/>      W.set_fg(get_hilite_color(W))
<a name="67"/>      return W
<a name="68"/>   end
<a name="69"/>
<a name="70"/>   public get_shadow_clone(W)
<a name="71"/>      W := W.clone()
<a name="72"/>      W.set_fg(get_shadow_color(W))
<a name="73"/>      return W
<a name="74"/>   end
<a name="75"/>
<a name="76"/>   public get_focus_clone(W)
<a name="77"/>      W := W.clone()
<a name="78"/>      W.set_fg(FOCUS_COLOR).
<a name="79"/>         set_masked_pattern(FOCUS_PATTERN)
<a name="80"/>      return W
<a name="81"/>   end
<a name="82"/>
<a name="83"/>   public get_dashed_clone(W)
<a name="84"/>      W := get_shadow_clone(W)
<a name="85"/>      W.set_masked_pattern(DASHED_PATTERN)
<a name="86"/>      return W
<a name="87"/>   end
<a name="88"/>
<a name="89"/>   public get_highlight_clone(W)
<a name="90"/>      W := W.clone()
<a name="91"/>      W.set_fg(HIGHLIGHT_COLOR).
<a name="92"/>         set_masked_pattern(HIGHLIGHT_PATTERN)
<a name="93"/>      return W
<a name="94"/>   end
<a name="95"/>
<a name="96"/>   public get_cursor_clone(W)
<a name="97"/>      W := W.clone()
<a name="98"/>      W.set_fg(CURSOR_COLOR)
<a name="99"/>      return W
<a name="100"/>   end
<a name="101"/>
<a name="102"/>   public get_down_clone(W)
<a name="103"/>      W := W.clone()
<a name="104"/>      W.set_fg(DOWN_COLOR)
<a name="105"/>      return W
<a name="106"/>   end
<a name="107"/>
<a name="108"/>   public get_selection_clone(W)
<a name="109"/>      W := W.clone()
<a name="110"/>      W.set_fg(SELECTION_COLOR)
<a name="111"/>      return W
<a name="112"/>   end
<a name="113"/>
<a name="114"/>   public get_over_clone(W)
<a name="115"/>      W := W.clone()
<a name="116"/>      W.set_fg(OVER_COLOR)
<a name="117"/>      return W
<a name="118"/>   end
<a name="119"/>
<a name="120"/>   public get_hilite_color(W)
<a name="121"/>      return GetHiliteColor(W)
<a name="122"/>   end
<a name="123"/>
<a name="124"/>   public get_shadow_color(W)
<a name="125"/>      return GetShadowColor(W)
<a name="126"/>   end
<a name="127"/>
<a name="128"/>   public shade_rectangle(W, x, y, w, h)
<a name="129"/>      W.filter(x, y, w, h, SHADE_FILTER || ":" || W.get_bg())
<a name="130"/>      link
<a name="131"/>   end
<a name="132"/>
<a name="133"/>   public fill_down_rectangle(W, x, y, w, h)
<a name="134"/>      local cw
<a name="135"/>      use {
<a name="136"/>         cw := get_down_clone(W),
<a name="137"/>         cw.fill_rectangle(x, y, w, h)
<a name="138"/>      }
<a name="139"/>      link
<a name="140"/>   end
<a name="141"/>
<a name="142"/>   public fill_selection_rectangle(W, x, y, w, h)
<a name="143"/>      local cw
<a name="144"/>      use {
<a name="145"/>         cw := get_selection_clone(W),
<a name="146"/>         cw.fill_rectangle(x, y, w, h)
<a name="147"/>      }
<a name="148"/>      link
<a name="149"/>   end
<a name="150"/>
<a name="151"/>   public fill_over_rectangle(W, x, y, w, h)
<a name="152"/>      local cw
<a name="153"/>      use {
<a name="154"/>         cw := get_over_clone(W),
<a name="155"/>         cw.fill_rectangle(x, y, w, h)
<a name="156"/>      }
<a name="157"/>      link
<a name="158"/>   end
<a name="159"/>
<a name="160"/>   public fill_hilite_rectangle(W, x, y, w, h)
<a name="161"/>      local cw
<a name="162"/>      use {
<a name="163"/>         cw := get_hilite_clone(W),
<a name="164"/>         cw.fill_rectangle(x, y, w, h)
<a name="165"/>      }
<a name="166"/>      link
<a name="167"/>   end
<a name="168"/>
<a name="169"/>   public fill_shadow_rectangle(W, x, y, w, h)
<a name="170"/>      local cw
<a name="171"/>      use {
<a name="172"/>         cw := get_shadow_clone(W),
<a name="173"/>         cw.fill_rectangle(x, y, w, h)
<a name="174"/>      }
<a name="175"/>      link
<a name="176"/>   end
<a name="177"/>
<a name="178"/>   public draw_dashed_rectangle(W, x, y, w, h, t)
<a name="179"/>      local cw
<a name="180"/>      /t := Gui.DASHED_WIDTH
<a name="181"/>      use {
<a name="182"/>         cw := get_dashed_clone(W),
<a name="183"/>         cw.draw_rectangle(x, y, w, h, t)
<a name="184"/>      }
<a name="185"/>      link
<a name="186"/>   end
<a name="187"/>
<a name="188"/>   public draw_focus_rectangle(W, x, y, w, h, t)
<a name="189"/>      local cw
<a name="190"/>      /t := Gui.DASHED_WIDTH
<a name="191"/>      use {
<a name="192"/>         cw := get_focus_clone(W),
<a name="193"/>         cw.draw_rectangle(x, y, w, h, t)
<a name="194"/>      }
<a name="195"/>      link
<a name="196"/>   end
<a name="197"/>
<a name="198"/>   public draw_highlight_rectangle(W, x, y, w, h, t)
<a name="199"/>      local cw
<a name="200"/>      /t := Gui.DASHED_WIDTH
<a name="201"/>      use {
<a name="202"/>         cw := get_highlight_clone(W),
<a name="203"/>         cw.draw_rectangle(x, y, w, h, t)
<a name="204"/>      }
<a name="205"/>      link
<a name="206"/>   end
<a name="207"/>
<a name="208"/>   public fill_highlight_rectangle(W, x, y, w, h)
<a name="209"/>      local cw
<a name="210"/>      use {
<a name="211"/>         cw := get_highlight_clone(W),
<a name="212"/>         cw.fill_rectangle(x, y, w, h)
<a name="213"/>      }
<a name="214"/>      link
<a name="215"/>   end
<a name="216"/>
<a name="217"/>   public draw_shadow_text_cursor(W, x, y, h)
<a name="218"/>      local cw
<a name="219"/>      use {
<a name="220"/>         cw := get_shadow_clone(W),
<a name="221"/>         cw.fill_rectangle(x - Gui.CURSOR_WIDTH / 2, y, Gui.CURSOR_WIDTH, h)
<a name="222"/>      }
<a name="223"/>      link
<a name="224"/>   end
<a name="225"/>
<a name="226"/>   public draw_text_cursor(W, x, y, h)
<a name="227"/>      local cw
<a name="228"/>      use {
<a name="229"/>         cw := get_cursor_clone(W),
<a name="230"/>         cw.fill_rectangle(x - Gui.CURSOR_WIDTH / 2, y, Gui.CURSOR_WIDTH, h)
<a name="231"/>      }
<a name="232"/>      link
<a name="233"/>   end
<a name="234"/>
<a name="235"/>   public create_tooltip_label()
<a name="236"/>      local l
<a name="237"/>      l := Label()
<a name="238"/>      l. set_bg(TOOLTIP_BG).
<a name="239"/>         set_font(TOOLTIP_FONT).
<a name="240"/>         set_fg(TOOLTIP_FG).
<a name="241"/>         set_border(CompoundBorder().
<a name="242"/>                      set_outer(PlainBorder().set_line_width(Gui.FINE_WIDTH)).
<a name="243"/>                      set_inner(EmptyBorder().set_insets(Gui.TEXT_INSET, Gui.TEXT_INSET, 
<a name="244"/>                                                         Gui.Y_INSET, Gui.Y_INSET)))
<a name="245"/>      return l
<a name="246"/>   end
<a name="247"/>
<a name="248"/>   public polish(obj)
<a name="249"/>   end
<a name="250"/>
<a name="251"/>   public distance2ticker_rate(d)
<a name="252"/>      local r
<a name="253"/>      # Awkward since we're going from scaled pixels to unit pixels
<a name="254"/>      # (rather than the other way round).
<a name="255"/>      r := TICK_RATE_MAX - integer(d * (TICK_RATE_FACTOR / Gui.SCALE))
<a name="256"/>      r &lt;:= TICK_RATE_MIN
<a name="257"/>      r &gt;:= TICK_RATE_MAX
<a name="258"/>      return r
<a name="259"/>   end
<a name="260"/>end
</pre></body></html>
