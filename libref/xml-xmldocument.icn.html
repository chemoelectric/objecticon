<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>xmldocument.icn</title></head><body><pre>
<a name="1"/>#
<a name="2"/># $Id: xmldocument.icn 7355 2019-01-07 18:29:40Z rparlett $
<a name="3"/>#
<a name="4"/># This file is in the public domain.
<a name="5"/>#
<a name="6"/># Author: Robert Parlett (parlett@dial.pipex.com)
<a name="7"/>#
<a name="8"/>
<a name="9"/>package xml
<a name="10"/>
<a name="11"/>import lang, io
<a name="12"/>
<a name="13"/>#
<a name="14"/># An XML document.
<a name="15"/>#
<a name="16"/>class XmlDocument(Document)
<a name="17"/>   public 
<a name="18"/>      parameter_entities,
<a name="19"/>      general_entities,
<a name="20"/>      element_declarations,
<a name="21"/>      notation_declarations,
<a name="22"/>      attribute_lists,
<a name="23"/>      id_attribute_values,
<a name="24"/>      validity_errors,
<a name="25"/>      warnings,
<a name="26"/>      standalone
<a name="27"/>
<a name="28"/>   #
<a name="29"/>   # Get the number of validity errors during parsing
<a name="30"/>   #
<a name="31"/>   public get_validity_errors()
<a name="32"/>      return validity_errors
<a name="33"/>   end
<a name="34"/>
<a name="35"/>   #
<a name="36"/>   # Get the number of warnings during parsing
<a name="37"/>   #
<a name="38"/>   public get_warnings()
<a name="39"/>      return warnings
<a name="40"/>   end
<a name="41"/>
<a name="42"/>   #
<a name="43"/>   # Succeed iff this is a standalone document
<a name="44"/>   #
<a name="45"/>   public is_standalone()
<a name="46"/>      succeed \standalone
<a name="47"/>   end
<a name="48"/>
<a name="49"/>   #
<a name="50"/>   # Debug function: Dump the entity definitions.
<a name="51"/>   #
<a name="52"/>   public show_entities()
<a name="53"/>      local x
<a name="54"/>      write("--- Parameter entities")
<a name="55"/>      every x := !sort(parameter_entities) do {
<a name="56"/>         write(image(x[1]), " -&gt; ",to_string(x[2]))
<a name="57"/>      }
<a name="58"/>      write()
<a name="59"/>      write("--- General entities")
<a name="60"/>      every x := !sort(general_entities) do  {
<a name="61"/>         write(image(x[1]), " -&gt; ",to_string(x[2]))
<a name="62"/>      }
<a name="63"/>      write()
<a name="64"/>   end
<a name="65"/>
<a name="66"/>   #
<a name="67"/>   # Debug function: Dump the element declarations
<a name="68"/>   #
<a name="69"/>   public show_element_declarations() 
<a name="70"/>      local x
<a name="71"/>      write("--- Element declarations")
<a name="72"/>      every x := !sort(element_declarations) do  {
<a name="73"/>         write(image(x[1]), " -&gt; ", to_string(x[2]))
<a name="74"/>      }
<a name="75"/>      write()
<a name="76"/>   end
<a name="77"/>
<a name="78"/>   #
<a name="79"/>   # Debug function: Dump the notation declarations
<a name="80"/>   #
<a name="81"/>   public show_notation_declarations() 
<a name="82"/>      local x
<a name="83"/>      write("--- Notation declarations")
<a name="84"/>      every x := !sort(notation_declarations) do  {
<a name="85"/>         write(image(x[1]), " -&gt; ", to_string(x[2]))
<a name="86"/>      }
<a name="87"/>      write()
<a name="88"/>   end
<a name="89"/>
<a name="90"/>   #
<a name="91"/>   # Debug function: Dump the attribute declarations
<a name="92"/>   #
<a name="93"/>   public show_attribute_lists() 
<a name="94"/>      local x, y
<a name="95"/>      write("--- Attribute lists")
<a name="96"/>      every x := !sort(attribute_lists) do  {
<a name="97"/>         write(image(x[1]), " -&gt; ")
<a name="98"/>         every y := !sort(x[2].attribute_defs) do
<a name="99"/>            write("       ", image(y[1]), " -&gt; ", to_string(y[2]))
<a name="100"/>      }
<a name="101"/>      write()
<a name="102"/>   end
<a name="103"/>
<a name="104"/>   #
<a name="105"/>   # Debug function: Show the ID attribute values
<a name="106"/>   #
<a name="107"/>   public show_id_attributes()
<a name="108"/>      local x
<a name="109"/>      write("--- ID Attributes")
<a name="110"/>      every x := !sort(id_attribute_values) do 
<a name="111"/>         write(x)
<a name="112"/>   end
<a name="113"/>
<a name="114"/>   #
<a name="115"/>   # Return the parameter_entities.  This is a table mapping names to
<a name="116"/>   # EntityDef objects.
<a name="117"/>   #
<a name="118"/>   public get_parameter_entities()
<a name="119"/>      return parameter_entities
<a name="120"/>   end
<a name="121"/>
<a name="122"/>   #
<a name="123"/>   # Return the general_entities.  This is a table mapping names to
<a name="124"/>   # EntityDef objects.
<a name="125"/>   #
<a name="126"/>   public get_general_entities()
<a name="127"/>      return general_entities
<a name="128"/>   end
<a name="129"/>
<a name="130"/>   #
<a name="131"/>   # Return the element_declarations.  This is a table mapping names to
<a name="132"/>   # ContentSpec objects, ie the root of the parsed regular expression.
<a name="133"/>   #
<a name="134"/>   public get_element_declarations()
<a name="135"/>      return element_declarations
<a name="136"/>   end
<a name="137"/>
<a name="138"/>   #
<a name="139"/>   # Return the notation_declarations.  A table mapping names to 
<a name="140"/>   # NotationDecl objects.
<a name="141"/>   #
<a name="142"/>   public get_notation_declarations()
<a name="143"/>      return notation_declarations
<a name="144"/>   end
<a name="145"/>
<a name="146"/>   #
<a name="147"/>   # Return the attribute_lists.  A table mapping element names to AttList objects.
<a name="148"/>   #
<a name="149"/>   public get_attribute_lists()
<a name="150"/>      return attribute_lists
<a name="151"/>   end
<a name="152"/>
<a name="153"/>   #
<a name="154"/>   # Return the id_attribute_values.  A set of all the ID attribute values 
<a name="155"/>   # encountered during parsing
<a name="156"/>   #
<a name="157"/>   public get_id_attribute_values()
<a name="158"/>      return id_attribute_values
<a name="159"/>   end
<a name="160"/>
<a name="161"/>   public override new()
<a name="162"/>      Document.new()
<a name="163"/>      parameter_entities := table()
<a name="164"/>      general_entities := table()
<a name="165"/>      element_declarations := table()
<a name="166"/>      notation_declarations := table()
<a name="167"/>      attribute_lists := table()
<a name="168"/>      id_attribute_values := set()
<a name="169"/>      validity_errors := 0
<a name="170"/>      warnings := 0
<a name="171"/>      return
<a name="172"/>   end
<a name="173"/>end
<a name="174"/>
</pre></body></html>
