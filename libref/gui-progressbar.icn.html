<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>progressbar.icn</title></head><body><pre>
<a name="1"/>#
<a name="2"/># $Id: progressbar.icn 8353 2020-07-05 11:25:52Z rparlett $
<a name="3"/>#
<a name="4"/>
<a name="5"/>package gui
<a name="6"/>
<a name="7"/>import util
<a name="8"/>
<a name="9"/>#
<a name="10"/># A progress bar
<a name="11"/>#
<a name="12"/>class ProgressBar(Component)
<a name="13"/>   public p
<a name="14"/>
<a name="15"/>   public override get_default_height()
<a name="16"/>      return self.cbwin.get_line_height() + border.get_total_height()
<a name="17"/>   end
<a name="18"/>
<a name="19"/>   public override display()
<a name="20"/>      local s, r, y1
<a name="21"/>      border.draw_rect(self.cbwin, self)
<a name="22"/>      r := border.get_inner_rect(self)
<a name="23"/>      s := p || "%"
<a name="24"/>      y1 := r.y + (r.h - cbwin.get_font_height()) / 2
<a name="25"/>      cbwin.draw_string(r.x + (r.w - self.cbwin.text_width(s)) / 2,
<a name="26"/>                        y1 + cbwin.get_font_ascent(),
<a name="27"/>                        s)
<a name="28"/>      #
<a name="29"/>      # Draw the bar in 'down' mode
<a name="30"/>      #
<a name="31"/>      Gui.style.fill_down_rectangle(self.cbwin, r.x, r.y, (r.w * p) / 100, r.h)
<a name="32"/>   end
<a name="33"/>
<a name="34"/>   #
<a name="35"/>   # Get the current percentage.
<a name="36"/>   #
<a name="37"/>   public get_percentage()
<a name="38"/>      return p
<a name="39"/>   end
<a name="40"/>
<a name="41"/>   #
<a name="42"/>   # Set the percentage.
<a name="43"/>   #
<a name="44"/>   public set_percentage(p)
<a name="45"/>      self.p := restrict(need_integer(p), 0, 100)
<a name="46"/>      self.invalidate()
<a name="47"/>      link
<a name="48"/>   end
<a name="49"/>
<a name="50"/>   public override new()
<a name="51"/>      Component.new()
<a name="52"/>      self.set_border(CompoundBorder().
<a name="53"/>                           set_outer(RaisedBorder()).
<a name="54"/>                           set_inner(EmptyBorder()))
<a name="55"/>      self.set_percentage(0)
<a name="56"/>      return
<a name="57"/>   end
<a name="58"/>end
<a name="59"/>
</pre></body></html>
