<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>menureserve.icn</title></head><body><pre>
<a name="1"/>package gui
<a name="2"/>
<a name="3"/>#
<a name="4"/># This class reserves space for an arbitrary `Component` in a menu.   The `Component` is
<a name="5"/># added to the menu when it is shown.
<a name="6"/>#
<a name="7"/>class MenuReserve(MenuComponent)
<a name="8"/>   public
<a name="9"/>      comp,
<a name="10"/>      res_w,
<a name="11"/>      res_h
<a name="12"/>
<a name="13"/>   public override initially()
<a name="14"/>      MenuComponent.initially()
<a name="15"/>      \comp | runerr("No component set")
<a name="16"/>      # Make comp inherit the parent component's attribs.
<a name="17"/>      comp.set_wattrib_ancestor(parent_component)
<a name="18"/>      # Temporarily add comp to the parent dialog in order to
<a name="19"/>      # calculate the required size.
<a name="20"/>      parent_component.parent_dialog.add(comp)
<a name="21"/>      res_w := comp.get_preferred_width()
<a name="22"/>      res_h := comp.get_preferred_height()
<a name="23"/>      parent_component.parent_dialog.remove(comp)
<a name="24"/>   end
<a name="25"/>
<a name="26"/>   public override prepare_parent_proxy()
<a name="27"/>      local p
<a name="28"/>      p := parent.temp_win
<a name="29"/>      comp.set_pos(label_x - parent.x, label_y - parent.y)
<a name="30"/>      comp.set_size(label_w, label_h)
<a name="31"/>      p.add(comp)
<a name="32"/>   end
<a name="33"/>
<a name="34"/>   # Set the `Component` to install into the `Menu` when it is shown.
<a name="35"/>   #
<a name="36"/>   public set_component(comp)
<a name="37"/>      self.comp := comp
<a name="38"/>      link
<a name="39"/>   end
<a name="40"/>
<a name="41"/>   public override get_label_mid_width()
<a name="42"/>      return res_w
<a name="43"/>   end
<a name="44"/>
<a name="45"/>   public override get_label_mid_height()
<a name="46"/>      return res_h
<a name="47"/>   end
<a name="48"/>
<a name="49"/>   public override get_label_left_width()
<a name="50"/>   end
<a name="51"/>
<a name="52"/>   public override get_label_left_height()
<a name="53"/>   end
<a name="54"/>
<a name="55"/>   public override get_label_right_width()
<a name="56"/>   end
<a name="57"/>
<a name="58"/>   public override get_label_right_height()
<a name="59"/>   end
<a name="60"/>
<a name="61"/>   public override draw_label(W, lw, mw, rw)
<a name="62"/>   end
<a name="63"/>
<a name="64"/>   public override new()
<a name="65"/>      MenuComponent.new()
<a name="66"/>      self.is_decorative_flag := &amp;yes
<a name="67"/>      return
<a name="68"/>   end
<a name="69"/>end
</pre></body></html>
