#line 0 "tpp.icn" ASCII
#SRC: IPROJ

# tpp.icn -- test file for Icon preprocessor
#
# generates lots of deliberate errors
# includes tpp1.icn, tpp2.icn, tpp3.icn

# following should be legal  (ignored by new preprocessor)
#line 11 "a.b.c" ASCII
abc 11
#line 22 "defgh" ASCII
defgh 22
#line 33 "ijklm" ASCII
ijklm 33
#line 44 "ijklm" ASCII
same 44
#line 55 "xyzzy" ASCII
xyzzy 55

#line 0 "bad #lines" ASCII
# following should be illegal but ignored





# line 95 "passed through unrecognized"




# following should be legal
#line 11 "a.b.c" ASCII
abc 11
#line 22 "defgh" ASCII
defgh 22
#line 33 "ijklm" ASCII
ijklm 33
#line 44 "ijklm" ASCII
<same> 44
#line 55 "xyzzy" ASCII
xyzzy 55
$( digraphs for EBCDIC $)
(that was EBCDIC)

#line 0 "bad.ppdirs" ASCII
# following should be illegal and diagnosed










#line 0 "include.tests" ASCII
=a=
#line 0 "empty" ASCII
#line 2 "include.tests" ASCII
=b=
#line 0 "empty" ASCII
#line 4 "include.tests" ASCII
=c=

=d=

=e=

=f=

=g=

=h=

=i=

=j=

=k=
#line 0 "tpp1.icn" ASCII
#  tpp1.icn: part 1 of circular include test
   =1=
#line 0 "tpp2.icn" ASCII
#  tpp2.icn: part 1 of circular include test
      =2=
#line 0 "tpp3.icn" ASCII
#  tpp3.icn: part 1 of circular include test
         =3=

         =3=
#line 3 "tpp2.icn" ASCII
      =2=
#line 3 "tpp1.icn" ASCII
   =1=
#line 22 "include.tests" ASCII
=l=
#line 0 "tpp3.icn" ASCII
#  tpp3.icn: part 1 of circular include test
         =3=
#line 0 "tpp1.icn" ASCII
#  tpp1.icn: part 1 of circular include test
   =1=
#line 0 "tpp2.icn" ASCII
#  tpp2.icn: part 1 of circular include test
      =2=

      =2=
#line 3 "tpp1.icn" ASCII
   =1=
#line 3 "tpp3.icn" ASCII
         =3=
#line 24 "include.tests" ASCII
=m=

#line 0 "predef.tst" ASCII
#== predef test ==
should be defined as 1:  1
should not be defined:  _EBCDIC




redefined:  ascii:ascii ebcdic:ebcdic

#line 0 "define.tst" ASCII
#== define test ==

#= illegal =







#= null =


a==b==c

#= simple =









1 3.14159 + "string" 'aeiou' ((sqrt(5) + 1) / 2) "fffrtb"
1+3.14159,+/"string",'aeiou'\((sqrt(5) + 1) / 2)?"fffrtb"!	# one pi plus etc
1"pi"+"twine"'aeiou'"expr""fffrtb"
'one'3.14159'plus'"string"'vowels'((sqrt(5) + 1) / 2)'xy_47_Hike'

#= redefinition =

3.14159


2.7183

#= deferred interpretation =


42 42



47 47

#= dubious pasting=


123e3  456e+3

#= recursion =

r

rr rr



a a a a a a a a a a a a a a a a a a a a a a a a a a a
b b b b b b b b b b b b b b b b b b b b b b b b b b b
c c c c c c c c c c c c c c c c c c c c c c c c c c c

= context =

123_abc+<%>+123<%>+abc_+<%>"_"<%>+36rX<%>+123e10<%>+12.e+5<%>+e7_+<%>#_

#line 0 "error.tst" ASCII
#= $error =





#line 0 "if.tst" ASCII
#= conditional compilation =



# $ifdef & $ifndef both true and false, with and without $else


   "isdef is defined"


#line 13 "if.tst" ASCII

#line 17 "if.tst" ASCII


   "notdef is not defined"



   "isdef is defined"
#line 27 "if.tst" ASCII

#line 31 "if.tst" ASCII
   "notdef is not defined"


# nesting without $else


   (true...)
#line 45 "if.tst" ASCII
   (...true)


# full nesting, with some nonstandard spacing


   (begin true branch)

      "isdef is defined"
#line 57 "if.tst" ASCII
   (end true branch)
#line 67 "if.tst" ASCII

# test all paths through four nested ifs
#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII
#line 47 "tpp4.icn" ASCII
#line 54 "tpp4.icn" ASCII
#line 57 "tpp4.icn" ASCII
	    - - - - : id1 id2 id3 id4




#line 70 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII
#line 47 "tpp4.icn" ASCII
#line 54 "tpp4.icn" ASCII

	    - - - + : id1 id2 id3 *4*
#line 59 "tpp4.icn" ASCII



#line 72 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII
#line 47 "tpp4.icn" ASCII


	    - - + + : id1 id2 *3* *4*
#line 53 "tpp4.icn" ASCII
#line 60 "tpp4.icn" ASCII


#line 74 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII
#line 47 "tpp4.icn" ASCII

#line 51 "tpp4.icn" ASCII
	    - - + - : id1 id2 *3* id4

#line 60 "tpp4.icn" ASCII


#line 76 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII


#line 37 "tpp4.icn" ASCII
	    - + + - : id1 *2* *3* id4

#line 46 "tpp4.icn" ASCII
#line 61 "tpp4.icn" ASCII

#line 78 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII



	    - + + + : id1 *2* *3* *4*
#line 39 "tpp4.icn" ASCII
#line 46 "tpp4.icn" ASCII
#line 61 "tpp4.icn" ASCII

#line 80 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII

#line 40 "tpp4.icn" ASCII

	    - + - + : id1 *2* id3 *4*
#line 45 "tpp4.icn" ASCII

#line 61 "tpp4.icn" ASCII

#line 82 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test
#line 32 "tpp4.icn" ASCII

#line 40 "tpp4.icn" ASCII
#line 43 "tpp4.icn" ASCII
	    - + - - : id1 *2* id3 id4


#line 61 "tpp4.icn" ASCII

#line 84 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test


#line 10 "tpp4.icn" ASCII
#line 13 "tpp4.icn" ASCII
	    + + - - : *1* *2* id3 id4


#line 31 "tpp4.icn" ASCII
#line 62 "tpp4.icn" ASCII
#line 86 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test


#line 10 "tpp4.icn" ASCII

	    + + - + : *1* *2* id3 *4*
#line 15 "tpp4.icn" ASCII

#line 31 "tpp4.icn" ASCII
#line 62 "tpp4.icn" ASCII
#line 88 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test




	    + + + + : *1* *2* *3* *4*
#line 9 "tpp4.icn" ASCII
#line 16 "tpp4.icn" ASCII
#line 31 "tpp4.icn" ASCII
#line 62 "tpp4.icn" ASCII
#line 90 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test



#line 7 "tpp4.icn" ASCII
	    + + + - : *1* *2* *3* id4

#line 16 "tpp4.icn" ASCII
#line 31 "tpp4.icn" ASCII
#line 62 "tpp4.icn" ASCII
#line 92 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test

#line 17 "tpp4.icn" ASCII

#line 21 "tpp4.icn" ASCII
	    + - + - : *1* id2 *3* id4

#line 30 "tpp4.icn" ASCII

#line 62 "tpp4.icn" ASCII
#line 94 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test

#line 17 "tpp4.icn" ASCII


	    + - + + : *1* id2 *3* *4*
#line 23 "tpp4.icn" ASCII
#line 30 "tpp4.icn" ASCII

#line 62 "tpp4.icn" ASCII
#line 96 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test

#line 17 "tpp4.icn" ASCII
#line 24 "tpp4.icn" ASCII

	    + - - + : *1* id2 id3 *4*
#line 29 "tpp4.icn" ASCII


#line 62 "tpp4.icn" ASCII
#line 98 "if.tst" ASCII

#line 0 "tpp4.icn" ASCII
#  tpp4.icn: nested $if test

#line 17 "tpp4.icn" ASCII
#line 24 "tpp4.icn" ASCII
#line 27 "tpp4.icn" ASCII
	    + - - - : *1* id2 id3 id4



#line 62 "tpp4.icn" ASCII
#line 100 "if.tst" ASCII


# make sure it accepts anything resembling an $if when skipping

#line 113 "if.tst" ASCII
<should pass this line>

# test diagnostics for missing args





# test diagnostics for extraneous args
#line 124 "if.tst" ASCII


#line 128 "if.tst" ASCII

# test else/endif out of place


#line 0 "tpp5.icn" ASCII
#  tpp5.icn: test for unterminated $if






#line 133 "if.tst" ASCII


# now try again when unterminated $if succeeds

#line 0 "tpp5.icn" ASCII
#  tpp5.icn: test for unterminated $if






#line 9 "tpp5.icn" ASCII


#outer unterminated $ifdef should get error
#line 138 "if.tst" ASCII



# test line directives encountered while skipping

#line 113 "invented" ASCII

#line 224 "invented" ASCII
