<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>htmlmessagedialog.icn</title></head><body><pre>
<a name="1"/>package ipl.browser
<a name="2"/>
<a name="3"/>import
<a name="4"/>   gui,
<a name="5"/>   util
<a name="6"/>
<a name="7"/># A simple dialog for displaying a single HTML page, typically
<a name="8"/># containing a help message.
<a name="9"/>#
<a name="10"/>class HTMLMessageDialog(Dialog)
<a name="11"/>   public const
<a name="12"/>      browser
<a name="13"/>   private readable
<a name="14"/>      delay_open_flag,
<a name="15"/>      size_precisely_flag
<a name="16"/>
<a name="17"/>   #
<a name="18"/>   # If set, then the dialog is hidden until the page is fully loaded.
<a name="19"/>   # This can be preferable for cosmetic reasons, so that the
<a name="20"/>   # partially loaded page (without images), is not shown.
<a name="21"/>   #
<a name="22"/>   public set_delay_open(s)
<a name="23"/>      self.delay_open_flag := need_flag(s)
<a name="24"/>      link
<a name="25"/>   end
<a name="26"/>
<a name="27"/>   #
<a name="28"/>   # This is like `set_delay_open()` above, but will size the dialog
<a name="29"/>   # to the size of the browser's inner component.  The browser's size
<a name="30"/>   # should also be set with `browser.set_size()`, since this
<a name="31"/>   # influences the size of the inner component.  In particular the
<a name="32"/>   # width should be set to the desired resulting width and the height
<a name="33"/>   # to a minimum desired height.
<a name="34"/>   #
<a name="35"/>   public set_size_precisely(s)
<a name="36"/>      self.size_precisely_flag := need_flag(s)
<a name="37"/>      link
<a name="38"/>   end
<a name="39"/>
<a name="40"/>   private on_first_load()
<a name="41"/>      if \size_precisely_flag then {
<a name="42"/>         # Remove the scrollbars, since they affect
<a name="43"/>         # ComponentScrollArea's layout(), and we are setting the size
<a name="44"/>         # based on there being no scrollbars.
<a name="45"/>         browser.
<a name="46"/>            remove_hsb().
<a name="47"/>            remove_vsb().
<a name="48"/>            set_size(browser.predict_total_width(browser.view.inner_w),
<a name="49"/>                     browser.predict_total_height(browser.view.inner_h)).
<a name="50"/>            reset_layout_chain()
<a name="51"/>         resize_win(get_preferred_width(), get_preferred_height())
<a name="52"/>      }
<a name="53"/>      win.set_canvas("normal")
<a name="54"/>   end
<a name="55"/>
<a name="56"/>   public override component_setup()
<a name="57"/>      if \delay_open_flag | \size_precisely_flag then {
<a name="58"/>         set_canvas("hidden")
<a name="59"/>         browser.connect_n(on_first_load, SimpleBrowser.PAGE_FULLY_LOADED)
<a name="60"/>      }
<a name="61"/>   end
<a name="62"/>
<a name="63"/>   public override new()
<a name="64"/>      Dialog.new()
<a name="65"/>      self.setup()
<a name="66"/>      return
<a name="67"/>   end
<a name="68"/>
<a name="69"/>   private setup()
<a name="70"/>      local layout_1, paint_1, close_button
<a name="71"/>      self.set_resize(&amp;yes)
<a name="72"/>      browser := SimpleBrowser().
<a name="73"/>         set_size(scale(353), scale(254)).
<a name="74"/>         clear_constraints().
<a name="75"/>         set_constraint("eol", &amp;yes).
<a name="76"/>         set_constraint("x_fill", &amp;yes).
<a name="77"/>         set_constraint("x_weight", 1.0).
<a name="78"/>         set_constraint("y_fill", &amp;yes).
<a name="79"/>         set_constraint("y_weight", 1.0)
<a name="80"/>      self.add(browser)
<a name="81"/>      paint_1 := TextPaint("Close")
<a name="82"/>      close_button := TextButton().
<a name="83"/>         clear_constraints().
<a name="84"/>         connect(self.dispose, Event.ACTION).
<a name="85"/>         set_toggles(&amp;no).
<a name="86"/>         set_paint(paint_1)
<a name="87"/>      self.add(close_button)
<a name="88"/>      self.connect(self.dispose, Event.WINDOW_CLOSE_BUTTON)
<a name="89"/>      layout_1 := GridLayout().
<a name="90"/>         set_extra("cells")
<a name="91"/>      self.set_layout(layout_1)
<a name="92"/>   end
<a name="93"/>end
<a name="94"/>
<a name="95"/>### Ivib-v2 layout: layouts/$.layout
</pre></body></html>
