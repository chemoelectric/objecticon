<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>mailbox.icn</title></head><body><pre>
<a name="1"/>#
<a name="2"/># $Id: mailbox.icn 7415 2019-01-25 16:51:58Z rparlett $
<a name="3"/>#
<a name="4"/>
<a name="5"/>package mail
<a name="6"/>
<a name="7"/>#
<a name="8"/># This class represents an internet Address, which
<a name="9"/># may be parsed in accordance with RFC822.
<a name="10"/>#
<a name="11"/>class Mailbox(Address)
<a name="12"/>   private readable
<a name="13"/>      local_part,
<a name="14"/>      domain,
<a name="15"/>      phrase,
<a name="16"/>      route
<a name="17"/>
<a name="18"/>   public get_local_part() 
<a name="19"/>      return local_part
<a name="20"/>   end
<a name="21"/>
<a name="22"/>   public set_local_part(x)
<a name="23"/>      local_part := x
<a name="24"/>      link
<a name="25"/>   end
<a name="26"/>
<a name="27"/>   public get_domain()
<a name="28"/>      return domain
<a name="29"/>   end
<a name="30"/>   
<a name="31"/>   public set_domain(x)
<a name="32"/>      domain := x
<a name="33"/>      link
<a name="34"/>   end
<a name="35"/>
<a name="36"/>   public get_phrase() 
<a name="37"/>      return phrase
<a name="38"/>   end
<a name="39"/>
<a name="40"/>   public set_phrase(x)
<a name="41"/>      phrase := x
<a name="42"/>      link
<a name="43"/>   end
<a name="44"/>
<a name="45"/>   public get_route() 
<a name="46"/>      return route
<a name="47"/>   end
<a name="48"/>
<a name="49"/>   public set_route(x)
<a name="50"/>      route := x
<a name="51"/>      link
<a name="52"/>   end
<a name="53"/>
<a name="54"/>   public override to_rfc822()
<a name="55"/>      local res, addr
<a name="56"/>
<a name="57"/>      addr := local_part || "@" || domain
<a name="58"/>
<a name="59"/>      if *(phrase | route) &gt; 0 then {
<a name="60"/>         if *phrase &gt; 0 then
<a name="61"/>            res := phrase || " &lt;"
<a name="62"/>         else
<a name="63"/>            res := "&lt;"
<a name="64"/>         if *route &gt; 0 then {
<a name="65"/>            every res ||:= "@" || !route
<a name="66"/>            res ||:= ": "
<a name="67"/>         }
<a name="68"/>         return res || addr || "&gt;"
<a name="69"/>      } else
<a name="70"/>         return addr
<a name="71"/>   end
<a name="72"/>
<a name="73"/>   public static parse(s)
<a name="74"/>      return RFC822Parser().parse_mailbox(s)
<a name="75"/>   end   
<a name="76"/>
<a name="77"/>   public override gen_mailboxes()
<a name="78"/>      link
<a name="79"/>   end
<a name="80"/>
<a name="81"/>   public static mailbox_list_to_string(l)
<a name="82"/>      local s, e
<a name="83"/>      s := ""
<a name="84"/>      every e := !l do {
<a name="85"/>         if *s &gt; 0 then
<a name="86"/>            s ||:= ","
<a name="87"/>         s ||:= e.to_rfc822()
<a name="88"/>      }
<a name="89"/>      return s
<a name="90"/>   end
<a name="91"/>
<a name="92"/>   public new(local_part, domain, phrase, route)
<a name="93"/>      /phrase := ""
<a name="94"/>      /route := []
<a name="95"/>      self.local_part := local_part
<a name="96"/>      self.domain := domain
<a name="97"/>      self.phrase := phrase
<a name="98"/>      self.route := route
<a name="99"/>      return
<a name="100"/>   end
<a name="101"/>end
<a name="102"/>
</pre></body></html>
