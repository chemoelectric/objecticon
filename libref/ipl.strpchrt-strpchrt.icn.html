<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>strpchrt.icn</title></head><body><pre>
<a name="1"/>############################################################################
<a name="2"/>#
<a name="3"/>#	File:     strpchrt.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedure for dynamic stripchart for windows
<a name="6"/>#
<a name="7"/>#	Author:   Gregg M. Townsend
<a name="8"/>#
<a name="9"/>#	Date:     August 14, 1996
<a name="10"/>#
<a name="11"/>############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>############################################################################
<a name="16"/>#
<a name="17"/>#	A stripchart models a continuous roll of paper that is marked along
<a name="18"/>#	the right edge while it moves continuously to the left.  This is
<a name="19"/>#	also known as a chart recording.
<a name="20"/>#
<a name="21"/>#	stripchart(window, x, y, width, height)	creates a stripchart.
<a name="22"/>#
<a name="23"/>#	sadvance(sc)				advances a stripchart.
<a name="24"/>#
<a name="25"/>#	smark(sc, y1, y2)			marks a stripchart.
<a name="26"/>#
<a name="27"/>############################################################################
<a name="28"/>#
<a name="29"/>#
<a name="30"/>#   stripchart(window, x, y, width, height)
<a name="31"/>#
<a name="32"/>#	establishes a stripchart and returns a record sc for use with
<a name="33"/>#	other procedures.
<a name="34"/>#
<a name="35"/>#	The chart can be marked by calling smark() or by drawing directly
<a name="36"/>#	at location (sc.x, y) where y is arbitrary.
<a name="37"/>#
<a name="38"/>#   sadvance(sc)
<a name="39"/>#
<a name="40"/>#	advances the stripchart by one pixel.
<a name="41"/>#
<a name="42"/>#   smark(sc, y1, y2)
<a name="43"/>#
<a name="44"/>#	marks the current position of the stripchart from y1 to y2.  y2 may
<a name="45"/>#	be omitted, in which case a single pixel at (sc.x, y1) is marked.
<a name="46"/>#
<a name="47"/>#	If the chart has not been advanced since the last mark at y1,
<a name="48"/>#	nothing happens.
<a name="49"/>#
<a name="50"/>############################################################################
<a name="51"/>#
<a name="52"/>#  Requires:  Version 9 graphics
<a name="53"/>#
<a name="54"/>############################################################################
<a name="55"/>
<a name="56"/>package ipl.strpchrt
<a name="57"/>
<a name="58"/>record StripChart_Rec(win, x0, y, w, h, x, n, last)
<a name="59"/>
<a name="60"/>
<a name="61"/>## stripchart(win, x, y, w, h) - create stripchart of size w by h at (x, y)
<a name="62"/>
<a name="63"/># create stripchart
<a name="64"/>procedure stripchart(win, x, y, w, h)		
<a name="65"/>   local r
<a name="66"/>
<a name="67"/>   r := win.canonical(x, y, w, h)
<a name="68"/>
<a name="69"/>   win.erase_area!r
<a name="70"/>   return StripChart_Rec(win, r.x, r.y, r.width, r.height, r.x, 0, list(r.y + r.height, -1))
<a name="71"/>end
<a name="72"/>
<a name="73"/>
<a name="74"/>## sadvance(sc, n) - advance stripchart n pixels (default 1)
<a name="75"/>
<a name="76"/># advance stripchart
<a name="77"/>procedure sadvance(sc, n)			
<a name="78"/>
<a name="79"/>   /n := 1
<a name="80"/>   every 1 to n do {
<a name="81"/>      if sc.x &lt; (sc.x0 + sc.w - 1) then
<a name="82"/>         sc.x +:= 1
<a name="83"/>      else
<a name="84"/>         sc.win.copy_to(sc.x0 + 1, sc.y, sc.w - 1, sc.h, sc.win, sc.x0, sc.y)
<a name="85"/>      sc.win.erase_area(sc.x, sc.y, 1, sc.h)
<a name="86"/>      sc.n +:= 1
<a name="87"/>      }
<a name="88"/>   return
<a name="89"/>end
<a name="90"/>
<a name="91"/>
<a name="92"/>## smark (sc, y1, y2) - mark stripchart from y1 to y2.
<a name="93"/>
<a name="94"/># mark stripchart
<a name="95"/>procedure smark(sc, y1, y2)			
<a name="96"/>   y1 := integer(y1)
<a name="97"/>   if sc.last[y1] &lt;:= sc.n then
<a name="98"/>      sc.win.draw_line(sc.x, y1, sc.x, \y2) | sc.win.draw_point(sc.x, y1)
<a name="99"/>   return
<a name="100"/>end
<a name="101"/>
<a name="102"/>
<a name="103"/>
<a name="104"/>#  ## test program.
<a name="105"/>#  #
<a name="106"/>#  #  usage:  stripchart [n]
<a name="107"/>#  #
<a name="108"/>#  link graphics
<a name="109"/>#  procedure main(args)
<a name="110"/>#     local win, sc, n, y, d
<a name="111"/>#     Window("size=500,200", args)
<a name="112"/>#     n := integer(args[1]) | 700
<a name="113"/>#     sc := stripchart()
<a name="114"/>#     y := 80
<a name="115"/>#     d := 40
<a name="116"/>#     every 1 to n do {
<a name="117"/>#        smark(sc, y +:= 2 * (?0 - ?0))
<a name="118"/>#        smark(sc, y + (d +:= 2 * (?0 - ?0)))
<a name="119"/>#        sadvance(sc)
<a name="120"/>#        }
<a name="121"/>#     WDone()
<a name="122"/>#     end
</pre></body></html>
