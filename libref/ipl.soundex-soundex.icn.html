<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>soundex.icn</title></head><body><pre>
<a name="1"/>############################################################################
<a name="2"/>#
<a name="3"/>#	File:     soundex.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedures to produce Soundex code for name
<a name="6"/>#
<a name="7"/>#	Author:   Cheyenne Wills
<a name="8"/>#
<a name="9"/>#	Date:     July 14, 1989
<a name="10"/>#
<a name="11"/>############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>############################################################################
<a name="16"/>#
<a name="17"/>#  This procedure produces a code for a name that tends to bring together
<a name="18"/>#  variant spellings.  See Donald E. Knuth, The Art of Computer Programming,
<a name="19"/>#  Vol.3; Searching and Sorting, pp. 391-392.
<a name="20"/>#
<a name="21"/>############################################################################
<a name="22"/>
<a name="23"/>package ipl.soundex
<a name="24"/>
<a name="25"/>procedure soundex(name)
<a name="26"/>   local first, c, i
<a name="27"/>   name := map(name,string(&amp;lcase),string(&amp;ucase)) # Convert to uppercase..
<a name="28"/>   first := name[1]
<a name="29"/>
<a name="30"/># Retain the first letter of the name, and convert all
<a name="31"/># occurrences of A,E,H,I,O,U,W,Y in other positions to "."
<a name="32"/>#
<a name="33"/># Assign the following numbers to the remaining letters
<a name="34"/># after the first:
<a name="35"/>#
<a name="36"/># B,F,P,V =&gt; 1		   L =&gt; 4
<a name="37"/># C,G,J,K,Q,S,X,Z =&gt; 2	   M,N =&gt; 5
<a name="38"/># D,T =&gt; 3		   R =&gt; 6
<a name="39"/>
<a name="40"/>   name := map(name,"ABCDEFGHIJKLMNOPQRSTUVWXYZ",
<a name="41"/>		    ".123.12..22455.12623.1.2.2")
<a name="42"/>
<a name="43"/># If two or more letters with the same code were adjacent
<a name="44"/># in the original name, omit all but the first
<a name="45"/>
<a name="46"/>   every c := !"123456" do
<a name="47"/>       while i := find(c||c,name) do
<a name="48"/>	   name[i+:2] := c
<a name="49"/>   name[1] := first
<a name="50"/>
<a name="51"/># Now delete our place holder ('.')
<a name="52"/>
<a name="53"/>   while i := upto('.',name) do name[i] := ""
<a name="54"/>
<a name="55"/>   return left(name,4,"0")
<a name="56"/>end
</pre></body></html>
