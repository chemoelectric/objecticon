<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta charset="UTF-8"><title>lastc.icn</title></head><body><pre>
<a name="1"/>#############################################################################
<a name="2"/>#
<a name="3"/>#	File:     lastc.icn
<a name="4"/>#
<a name="5"/>#	Subject:  Procedures for string scanning
<a name="6"/>#
<a name="7"/>#	Author:   David A. Gamey
<a name="8"/>#
<a name="9"/>#	Date:     May 2, 2001
<a name="10"/>#
<a name="11"/>#############################################################################
<a name="12"/>#
<a name="13"/>#   This file is in the public domain.
<a name="14"/>#
<a name="15"/>#############################################################################
<a name="16"/>#
<a name="17"/>#     Descriptions:
<a name="18"/>#
<a name="19"/>#     lastc( c, s, i1, i2 ) : i3
<a name="20"/>#
<a name="21"/>#        succeeds and produces i1, provided either
<a name="22"/>#        -  i1 is 1, or
<a name="23"/>#        -  s[i1 - 1] is in c and i2 is greater than i1
<a name="24"/>#
<a name="25"/>#        defaults:   same as for any
<a name="26"/>#        errors:     same as for any
<a name="27"/>#
<a name="28"/>#     findp( c, s1, s2, i1, i2 ) : i3, i4, ..., in
<a name="29"/>#
<a name="30"/>#        generates the sequence of positions in s2 at which s1 occurs
<a name="31"/>#        provided that: 
<a name="32"/>#        -  s2 is preceded by a character in c,
<a name="33"/>#           or is found at the begining of the string
<a name="34"/>#        i1 &amp; i2 limit the search as in find
<a name="35"/>#
<a name="36"/>#        defaults:   same as for find
<a name="37"/>#        errors:     same as for find &amp; lastc
<a name="38"/>#
<a name="39"/>#     findw( c1, s1, c2, s2, i1, i2 ) : i3, i4, ..., in
<a name="40"/>#
<a name="41"/>#        generates the sequence of positions in s2 at which s1 occurs
<a name="42"/>#        provided that:
<a name="43"/>#        -  s2 is preceded by a character in c1, 
<a name="44"/>#           or is found at the beginning of the string; 
<a name="45"/>#        and
<a name="46"/>#        -  s2 is succeeded by a character in c2,
<a name="47"/>#           or the end of the string
<a name="48"/>#        i1 &amp; i2 limit the search as in find
<a name="49"/>#
<a name="50"/>#        defaults:   same as for find
<a name="51"/>#        errors:     same as for find &amp; lastc
<a name="52"/>#
<a name="53"/>#############################################################################
<a name="54"/>
<a name="55"/>package ipl.lastc
<a name="56"/>
<a name="57"/>import
<a name="58"/>   ipl.scan(begin_analysis)
<a name="59"/>
<a name="60"/>procedure lastc( c, s, i1, i2 )
<a name="61"/>   local a
<a name="62"/>   a := begin_analysis(s, i1, i2) | fail
<a name="63"/>   s := a.s; i1 := a.i; i2 := a.j
<a name="64"/>   suspend ( ( i1 = 1 )  |  any( c, s, 0 &lt; ( i1 - 1 ), i2 ) )
<a name="65"/>end
<a name="66"/>
<a name="67"/>procedure findp( c, s1, s2, i1, i2 )
<a name="68"/>   local a
<a name="69"/>   a := begin_analysis(s2, i1, i2) | fail
<a name="70"/>   s2 := a.s; i1 := a.i; i2 := a.j
<a name="71"/>   suspend lastc( c, s2, find( s1, s2, i1, i2 ), i2 )
<a name="72"/>end
<a name="73"/>
<a name="74"/>procedure findw( c1, s1, c2, s2, i1, i2 )
<a name="75"/>
<a name="76"/>   local csr,csr2,a
<a name="77"/>   a := begin_analysis(s2, i1, i2) | fail
<a name="78"/>   s2 := a.s; i1 := a.i; i2 := a.j
<a name="79"/>
<a name="80"/>   suspend 1(  csr := findp( c1, s1, s2, i1, i2 ),
<a name="81"/>             csr2 := csr + *s1,
<a name="82"/>             ( csr2 = ( *s2 + 1 ) ) | any( c2, s2, csr2, i2 )
<a name="83"/>             )
<a name="84"/>end
</pre></body></html>
