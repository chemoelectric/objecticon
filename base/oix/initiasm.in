# Wrapper for loaded program.  This function is the body of the returned
# co-expression.
$start load_wrapper
    Op_Invoke
        clo:0
        Op_Arg arg:0
        1
        MainExit
        Op_Arg arg:1
      
# main() has exited; either fail to the enclosing coexpression or
# transfer to the parent progstate.
MainExit:
    Op_Custom c:handle_loaded_prog_exit
    Op_Goto 
        MainExit
$end

# Wrapper for main with single list argument.
$start main_wrapper
    Op_Invoke
        clo:0
        Op_Arg arg:0
        1
        MainExit
        Op_Arg arg:1
      
MainExit:
    Op_Exit
$end

# Wrapper for main with no arguments.
$start main_wrapper0
    Op_Invoke
        clo:0
        Op_Arg arg:0
        0
        MainExit
      
MainExit:
    Op_Exit
$end
